=== Fetching Proposal: I_kwDOAWBuf85Fuixy ===
Issue URL: https://github.com/golang/go/issues/51684

==== [Issue Title] ====
regexp: add ErrNestingDepth error

==== [Issue Body] ====
The fix for #51112 introduced a nesting depth check in the regexp parser.
To avoid adding new API, the fix returns ErrInternalError on regexps that are too deeply nested.
For Go 1.19 we want to give this error a proper value with a good message.

I propose to add a new ErrorCode:

	ErrNestingDepth          ErrorCode = "expression nests too deeply"

The code change is in [CL 384617](https://go.dev/cl/384617).

==== [Comments] ====

--- Comment #1 by rsc ---

This proposal has been added to the [active column](https://golang.org/s/proposal-status#active) of the proposals project
and will now be reviewed at the weekly proposal review meetings.
â€” rsc for the proposal review group


--- Comment #2 by rsc ---

Based on the discussion above, this proposal seems like a **[likely accept](https://golang.org/s/proposal-status#likely-accept)**.
â€” rsc for the proposal review group


--- Comment #3 by rsc ---

No change in consensus, so **[accepted](https://golang.org/s/proposal-status#accepted)**. ðŸŽ‰
This issue now tracks the work of implementing the proposal.
â€” rsc for the proposal review group


--- Comment #4 by gopherbot ---
Change https://go.dev/cl/384617 mentions this issue: `regexp/syntax: add and use ErrInvalidDepth`

--- Comment #5 by mibk ---
The proposed changed was

    ErrNestingDepth          ErrorCode = "expression nests too deeply"

while the actual change uses

    ErrInvalidDepth          ErrorCode = "invalid nesting depth"

Was that intentional? Also, there was a suggestion by Rob Pike to use

    ErrTooDeep               ErrorCode = "expression nests too deeply"


--- Comment #6 by robpike ---
I agree, this was not resolved to my satisfaction. Did something get missed?




--- Comment #7 by gopherbot ---
Change https://go.dev/cl/401076 mentions this issue: `regexp: change ErrInvalidDepth message to match proposal`

--- Comment #8 by ianlancetaylor ---
Sent https://go.dev/cl/401076.

--- Comment #9 by gopherbot ---
Change https://go.dev/cl/401854 mentions this issue: `regexp/syntax: rename ErrInvalidDepth to ErrNestingDepth`
