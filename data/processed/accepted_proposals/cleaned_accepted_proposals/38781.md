=== Fetching Proposal: MDU6SXNzdWU2MTA1MDkxOTE= ===
Issue URL: https://github.com/golang/go/issues/38781

==== [Issue Title] ====
testing/iotest: add ErrReader

==== [Issue Body] ====
### Abstract

Add a `iotest.ErrReader` `io.Reader` implementation that reads 0 bytes and fails.

This would be useful for quickly adding test cases for when `Read` doesn't work for some reason.

### Background

The `iotest` package already have a couple of other `io.Reader` implementations, but we don't have any that fails right away.

On nearly all codebases I worked in, I created this same `failReader`/`errReader` implementation. Judging by [this](https://github.com/search?l=Go&q=failreader&type=Code) and [this](https://github.com/search?l=Go&q=errreader&type=Code) github searches, I'm not alone.

### Proposal

Add it to the standard library, under the `iotest` package.

I actually have the PR opened already: https://github.com/golang/go/pull/34741

### Rationale

Make it easier to add test cases for read failures.

==== [Comments] ====

--- Comment #1 by rsc ---
I'd call it ErrReader, to match DataErrReader, but this seems fine to me.
That is:

    package iotest

    // ErrReader returns an io.Reader that returns 0, err from all Read calls.
    func ErrReader(err error) io.Reader



--- Comment #2 by caarlos0 ---
`ErrReader` sounds good to me as well. Updated the proposal.

EDIT: updated PR as well.

--- Comment #3 by rsc ---
Adding to proposal minutes. Seems fine to me, as I said before.


--- Comment #4 by rsc ---
Based on how trivial this is and the lack of any objections, this seems like a **likely accept**.



--- Content after FINAL acceptance decision removed ---