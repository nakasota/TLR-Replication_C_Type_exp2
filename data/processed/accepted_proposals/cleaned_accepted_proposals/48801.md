=== Fetching Proposal: I_kwDOAWBuf848mQ_N ===
Issue URL: https://github.com/golang/go/issues/48801

==== [Issue Title] ====
cmd/vet: check for time formats with 2006-02-01

==== [Issue Body] ====
`yyyy-dd-mm` is a time format that isn't really used anywhere [[1]](https://stackoverflow.com/questions/2254014/are-there-locales-or-common-programs-that-use-yyyy-dd-mm-as-the-date-format). It is much more likely that the user intended to use
`yyyy-mm-dd` instead and made a mistake. This happens quite often[ [2]](https://github.com/search?l=&p=1&q=%222006-02-01%22+language%3AGo&type=Code) because of the unusual way to handle time formatting and parsing in Go. Since the mistake is Go specific and happens so often a vet check will be useful.

See: https://github.com/golang/tools/pull/342

1. https://stackoverflow.com/questions/2254014/are-there-locales-or-common-programs-that-use-yyyy-dd-mm-as-the-date-format
2. https://github.com/search?l=&p=1&q=%222006-02-01%22+language%3AGo&type=Code

==== [Comments] ====

--- Comment #1 by seankhliao ---
I don't think "isn't really used" meets the precision bar for vet
Looking over the instances where they show up, there seem to be valid uses in there, especially wrt to tests

--- Comment #2 by rsc ---
We would need some evidence of frequency to put this in. Is there any?


--- Comment #3 by rsc ---

This proposal has been added to the [active column](https://golang.org/s/proposal-status#active) of the proposals project
and will now be reviewed at the weekly proposal review meetings.
‚Äî rsc for the proposal review group


--- Comment #4 by erikdubbelboer ---
There is a lots of projects on Github with this issue: https://github.com/search?l=GO&q=%222006-02-01%22+language%3AGo&type=Code

Even bigger projects have or had bad code:
1. https://github.com/couchbase/go-couchbase/blob/118e3f09dbf08c7310d6bc1a5cfe5e6f8a0e3c32/populate/populate.go#L18
3. https://github.com/gobuffalo/buffalo/blob/20f545e952c31f65eadf7a4833388ed2eaa37589/binding/decoders/time_test.go#L55-L56
3. https://github.com/juju/juju/commit/f992f35c22c23a5dc043bcd3beae552e3912e058

--- Comment #5 by rsc ---
That's pretty surprising but it does seem to meet the vet bars:

- Correctness - a real or potential bug for sure
- Frequency - seems to happen more than we expected!
- Precision - can't imagine why anyone would use YYYY-DD-MM date format



--- Comment #6 by twmb ---
The buffalo link is a test and specifically follows the 2006-02-01 line checking that 2017-01-10 is parsed as October 1st. The couchbase code looks to be code that generates database entries, and I wouldn't be surprised if it's deliberately choosing the US date format. Some other code in the first page of that search is explicitly using US format:

https://github.com/jserranojunior/learning-golang/blob/0503e6c60367225fc4b1218123b121bfce063441/Projects/ConvertDates/ConvertDate.go#L27

I've in the past run into YYYY-DD-MM and MM-DD-YYYY when dealing with government forms (which was highly confusing, personally).

I think this might be a good signal some of time, but would have false positives. I also feel that anybody that knows the 2006, 01, and 02 numbers also knows the documentation mentioning that 01 is the month and 02 is the day (or, if they're like me, the person looks up what 01 and 02 refer to every time they need to format a time in Go). I'd bet that more often than not, the choice of 02 and 01 is deliberate. If anything, this feels like a check more suited for a linter that an org / teams could opt into, rather than a default check that cannot be opted out of.

--- Comment #7 by rsc ---
@twmb can you give specific examples of uses of YYYY-DD-MM?
https://stackoverflow.com/questions/2254014/are-there-locales-or-common-programs-that-use-yyyy-dd-mm-as-the-date-format suggests it is not used anywhere.

The buffalo link and test looks like a bug to me, compounded by someone taking the output and hard-coding that as the expected answer.

Similarly, the jserranojunior link looks like a bug. The date is parsed and then reformatted using the same 2006-02-01 format, so you wouldn't notice for many dates that it was wrong. (Up until the 13th of the month it would pass through just fine.)

I don't understand the reference to YYYY-DD-MM as "US format". I have lived in the US my whole life and never seen a date written that way. Halloween is 10/31 or 10-31 not 31-10 or 31/10 and definitely not 2021-31-10.


--- Comment #8 by timothy-king ---
https://stackoverflow.com/questions/2254014/are-there-locales-or-common-programs-that-use-yyyy-dd-mm-as-the-date-format points to a wikipedia entry: https://en.wikipedia.org/wiki/Date_format_by_country. It states for Kazakhstan:
> Short format: (yyyy.dd.mm) in Kazakh

Like the SO post I also cannot read the citation for this. "yyyy.dd.mm" is close but uses a different delimiter ("." instead of "-").

--- Comment #9 by erikdubbelboer ---
I tried to make sense of the document but Google Translate doesn't really help. The specific section is:
```
“ö“±–∂–∞—Ç—Ç—ã“£ –∫“Ø–Ω—ñ –∞—Ä–∞–± —Å–∞–Ω—ã–º–µ–Ω –º—ã–Ω–∞–¥–∞–π –¥”ô–π–µ–∫—Ç—ñ–ª—ñ–∫–ø–µ–Ω: –∂—ã–ª, –∞–π–¥—ã“£ –∫“Ø–Ω—ñ, –∞–π. –ê–π–¥—ã“£ –∫“Ø–Ω—ñ –º–µ–Ω –∞–π –∂“±–ø –∞—Ä–∞–± —Å–∞–Ω—ã–º–µ–Ω
–Ω“Ø–∫—Ç–µ –∞—Ä“õ—ã–ª—ã –±”©–ª—ñ–Ω—ñ–ø, –∂—ã–ª —Ç”©—Ä—Ç –∞—Ä–∞–± —Å–∞–Ω—ã–º–µ–Ω —Ä–µ—Å—ñ–º–¥–µ–ª–µ–¥—ñ.
```
Which translates to:
```
The date of the document is in Arabic numerals in the following order: year, day of the month, month. The day of
the month and the month are separated by a pair of Arabic numerals, and the year is represented by four Arabic
numerals.
```
But since the author(s) on Wikipedia specifically use `.` as delimiter I don't think this format is relevant to this proposal.

--- Comment #10 by rsc ---

Based on the discussion above, this proposal seems like a **[likely accept](https://golang.org/s/proposal-status#likely-accept)**.
‚Äî rsc for the proposal review group


--- Comment #11 by rsc ---

No change in consensus, so **[accepted](https://golang.org/s/proposal-status#accepted)**. üéâ
This issue now tracks the work of implementing the proposal.
‚Äî rsc for the proposal review group

--- Content after FINAL acceptance decision removed ---