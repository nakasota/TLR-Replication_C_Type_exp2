=== Fetching Proposal: MDU6SXNzdWU2NTE4ODI3Mzg= ===
Issue URL: https://github.com/golang/go/issues/40082

==== [Issue Title] ====
database/sql: add NullInt16 support

==== [Issue Body] ====
Hey Go team!

I maintain a [database code generator](https://github.com/kyleconroy/sqlc). I'm having trouble correctly supporting null `smallint` columns because the database/sql package does not have a `NullInt16` type. It would look almost identical to `Nullint32` and `NullInt64`.

```go
// NullInt16 represents an int32 that may be null.
// NullInt16 implements the Scanner interface so
// it can be used as a scan destination, similar to NullString.
type NullInt16 struct {
	Int16 int16
	Valid bool // Valid is true if Int16 is not NULL
}

// Scan implements the Scanner interface.
func (n *NullInt16) Scan(value interface{}) error {
	if value == nil {
		n.Int16, n.Valid = 0, false
		return nil
	}
	n.Valid = true
	return convertAssign(&n.Int16, value)
}

// Value implements the driver Valuer interface.
func (n NullInt16) Value() (driver.Value, error) {
	if !n.Valid {
		return nil, nil
	}
	return int64(n.Int16), nil
}
```

==== [Comments] ====

--- Comment #1 by ianlancetaylor ---
CC @kardianos 

--- Comment #2 by kardianos ---
@kyleconroy This looks reasonable. Can you send a CL?

On a side note, these nullable wrappers would probably be a great use for generics...


--- Comment #3 by kyleconroy ---
Yeah, can do. A bit swamped right now, but should have it done by the end of the week

--- Comment #4 by kyleconroy ---
> On a side note, these nullable wrappers would probably be a great use for generics...

I know! Here's a four-line replacement for the various `sql.Null*` types in the standard library.

```
    type Null(type T) struct {
        Val   T
        Valid bool // Valid is true if Val is not NULL
    }
```

Here's what it looks like in practice: https://go2goplay.golang.org/p/Qj8MqYWWAc3

--- Comment #5 by rsc ---
Do we need NullByte for tinyint too?
(No luck for 24-bit mediumint)


--- Comment #6 by kardianos ---
NullByte and NullInt16 both sound good. Might as well complete the family.


--- Comment #7 by rsc ---
Based on the discussion above, this seems like a **likely accept**.



--- Content after FINAL acceptance decision removed ---