=== Fetching Proposal: MDU6SXNzdWU3NzUzOTE4NDI= ===
Issue URL: https://github.com/golang/go/issues/43401

==== [Issue Title] ====
encoding/csv: add Reader.InputOffset method

==== [Issue Body] ====
```
// InputOffset returns the input stream byte offset of the current reader
// position. The offset gives the location of the end of the most recently
// read row and the beginning of the next row. 
func (r *Reader) InputOffset() int64
```

`encoding/json.Decoder` already has a method like this:

https://golang.org/pkg/encoding/json/#Decoder.InputOffset

==== [Comments] ====

--- Comment #1 by ianlancetaylor ---
For the encoding/json package it made sense to add `InputOffset`, because there was no straightforward way for the code calling encoding/json and providing the `io.Reader` to know which token was read last.  That is a little less convincing for encoding/csv, which is a line-oriented format.  The `io.Reader` can keep track of which line is being processed, by returning a line at a time.

Still, symmetry with the other packages is a reasonable argument.

--- Comment #2 by ghost ---
It makes sense here, too. It is sometimes necessary to have random access to the rows, so that you can read some of them without reading the entire (possibly huge) file.

I've implemented a simple inverted index, where the documents are rows from CSV files. Every document ID is mapped to a filename and a row offset. When I query the index, I can read only the rows that match by seeking to the offsets.

There's also this question on StackOverflow: https://stackoverflow.com/questions/22875018/read-random-lines-off-a-text-file-in-go

--- Comment #3 by rsc ---

This proposal has been added to the [active column](https://golang.org/s/proposal-status#active) of the proposals project
and will now be reviewed at the weekly proposal review meetings.
â€” rsc for the proposal review group


--- Comment #4 by rsc ---

Based on the discussion above, this proposal seems like a **[likely accept](https://golang.org/s/proposal-status#likely-accept)**.
â€” rsc for the proposal review group


--- Comment #5 by rsc ---

No change in consensus, so **[accepted](https://golang.org/s/proposal-status#accepted)**. ðŸŽ‰
This issue now tracks the work of implementing the proposal.
â€” rsc for the proposal review group


--- Comment #6 by gopherbot ---
Change https://go.dev/cl/405675 mentions this issue: `encoding/csv: add Reader.InputOffset method`
