=== Fetching Proposal: Lack of knowledge ===
Issue URL: https://github.com/golang/go/issues/14757

==== [Issue Title] ====
proposal: crypto, hash: add WriteString support

==== [Issue Body] ====
Add WriteString to crypto/sha1, crypto/sha256, hash/crc64, etc. Similar to #11805. Probably easy pickings.


==== [Comments] ====

--- Comment #1 by josharian ---
And see CL 20524 for a place this would get used.


--- Comment #2 by sctb ---
Initial CL submitted. I expect it's not quite there yet; glad to make any changes necessary. 


--- Comment #3 by gopherbot ---
CL https://golang.org/cl/22422 mentions this issue.


--- Comment #4 by minux ---
My thought on this issue:

If you want high performance hashing, then using strings
is very probable already a mistake (the string must come
from somewhere else, so it gets converted from []byte in
the first place.) But if the string does not come from outside
(I/O), then it's still better to use []byte directly.

Could you please given a real scenarios where you want
WriteString support on a crypto.Hash while still care about
the utmost performance?

While I agree that WriteString support on io.MultiWriter is fine,
adding WriteString support to all io.Writer implementations
doesn't look necessary esp. if doesn't bring enough
performance improvement.


--- Comment #5 by josharian ---
I think you're probably right. Before abandoning this, I'd like to do a bit of research in my Go corpus, but that might take a while.


--- Comment #6 by Scratch-net ---
Having WriteString might indirectly suggest using it to hash passwords, which is a very, very bad idea.

--- Comment #7 by rsc ---
I am very skeptical of an unsafe implementation of WriteString here.
Even the one in os.File is not unsafe - it does Write([]byte(s)).
I don't believe crypto should set a precedent that "unsafe is OK if it's for performance",
for others to follow.


--- Comment #8 by rsc ---
Based on the discussion above (and the general lack of interest over 4 years), this seems like a **likely decline**.

Leaving open for a week for final comments.


--- Comment #9 by rsc ---
No change in consensus, so declined.


--- Comment #10 by rsc ---
Over on #38776 we realized that WriteString can be added without requiring use of unsafe, so maybe we should do that. WriteString is now included in #38776.

