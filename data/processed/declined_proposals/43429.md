=== Fetching Proposal: Lack of knowledge ===
Issue URL: https://github.com/golang/go/issues/43429

==== [Issue Title] ====
proposal: spec: allow append(string, ...) and view the string argument as a byte slice

==== [Issue Body] ====
Search `append([]byte(` in the Go project, there are at least 8 append calls
with the first arguments as conversions from string to []byte.
If the first argument of such an append call is allowed to be a string,
then an unnecessary allocation may be avoided.
~~Although it looks the official Go compiler has made an optimization here
to avoid the unnecessary allocations,~~ (in fact, not made yet) ~~but~~ the proposal makes
Go code more consistent (with the second arguments, which can be strings already)
and look cleaner.

Besides these aforementioned benefits (cleaner, more consistent and efficient),
this change could also partically remedy the fact of lack of a simple way to
decap the first arguments of append calls (for the scenarios they are []byte). 
* https://github.com/golang/go/issues/43341
* https://github.com/golang/go/issues/38081
* https://github.com/golang/go/issues/25638

We can use a `string(aByteSlice)` conversion as the first
argument of an append call to hint that the first argument is decaped.
It is easy for compilers to not make an allocation for such conversions.


==== [Comments] ====

--- Comment #1 by rsc ---
This proposal does _not_ make Go more consistent, as claimed.
Instead, it introduces a special case where the type returned by append is different from the type of the first argument.
This makes Go less consistent.

It would be completely fine for the compiler to optimize away the allocation in `append([]byte(s), moreBytes...)` of course. But the language change seems like a non-starter.

--- Comment #2 by zigo101 ---
> Instead, it introduces a special case where the type returned by append is different from the type of the first argument.

I mean it makes `append(aByteSlice, aString...)` less lonely special.
By interpreting strings as immutable byte slices, many explanations will be more consistent.

--- Comment #3 by rsc ---

This proposal has been added to the [active column](https://golang.org/s/proposal-status#active) of the proposals project
and will now be reviewed at the weekly proposal review meetings.
— rsc for the proposal review group


--- Comment #4 by rsc ---

Based on the discussion above, this proposal seems like a **[likely decline](https://golang.org/s/proposal-status#likely-decline)**.
— rsc for the proposal review group


--- Comment #5 by zigo101 ---
OK. But it looks there are no effective discussions here.

--- Comment #6 by rsc ---

No change in consensus, so **[declined](https://golang.org/s/proposal-status#declined)**.
— rsc for the proposal review group

