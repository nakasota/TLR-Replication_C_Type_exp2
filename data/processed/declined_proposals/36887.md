=== Fetching Proposal: Lack of knowledge ===
Issue URL: https://github.com/golang/go/issues/36887

==== [Issue Title] ====
proposal: sort: add InvertSlice

==== [Issue Body] ====
Golang should have an InvertSlice() function in some module (preferably `sort`), which essentially reverses all slice elements. This would allow some neat features like string reversal.

This is easy to implement and will not break code. Please consider the proposal.

==== [Comments] ====

--- Comment #1 by networkimprov ---
I agree that it should be in the stdlib, both for strings and slices, e.g. `sort.InvertSlice(slice)`

Note the comparison in the loop can be simpler than `i < len(r)/2`:
```
   for a1, a2 := 0, len(S)-1; a1 < a2; a1, a2 = a1+1, a2-1 {
      S[a1], S[a2] = S[a2], S[a1]
   }
```

--- Comment #2 by ALTree ---
This was rejected in the past: #14777. A few comments:

> Even C and C++ have this

This is usually not considered a valid argument for inclusion of a new feature in the standard library. There are many things that other languages have, and Go has not.

> This is easy to implement and will not break code.

This is not enough: the addition also needs to be *useful* enough to a great number of Go programmer to justify its inclusion in the standard library. As noted in #14777, how often would the typical Go programmer use  Reverse (except when implementing it as a programming exercise)?

I'm closing here as a dup of #14777.

--- Comment #3 by networkimprov ---
Pls reopen. #14777 was closed after 2.5h and a single comment by a Go team member, without hearing the author's use case. Proposals like this are now reviewed by committee.

Even if strings.Reverse() isn't accepted, the widely applicable sort.InvertSlice() should be considered, and that would allow `string(sort.InvertSlice([]rune(s)))`.

--- Comment #4 by ianlancetaylor ---
I'm not aware of a standard C function that reverses a string.  Do you have a pointer?  C++ has reverse iterators, but again I'm not aware of a function or method that reverses a string, unless you mean std::reverse which is a generic operation.

In Go, strings are a sequence of bytes but many of the functions in the strings package treat them as a sequence of characters.  A reverse operation is inherently ambiguous: does it reverse bytes or characters?

--- Comment #5 by ianlancetaylor ---
It's fine to make this a proposal, but it should be specific about exactly what `strings.Reverse` should do, and why that is better than the other choice.

--- Comment #6 by networkimprov ---
@ianlancetaylor could you reopen the issue, as it's under discussion?

--- Comment #7 by codic12 ---
@ianlancetaylor for C++, `std::reverse` (from iostream.h or string.h, not sure). For C, I'm talking about `strrev` from string.h. 
I am talking about reversing runes, aka characters.

--- Comment #8 by codic12 ---
> and why that is better than the other choice.

which other choice?

> This is not enough: the addition also needs to be useful enough to a great number of Go programmer to justify its inclusion in the standard library. As noted in #14777, how often would the typical Go programmer use Reverse (except when implementing it as a programming exercise)?

This is a useful core language feature, cryptography programs could benefit from it.



--- Comment #9 by networkimprov ---
@gsbhasin123, a crypto algorithm would use `[]byte`, not `string`. So I think you have a stronger case by proposing for package sort:
```
func InvertSlice(s interface{}) interface{} // returns its argument ('Reverse' is taken)
```
That enables a string inversion via `string(sort.InvertSlice([]rune(str)).([]rune))`

--- Comment #10 by codic12 ---
@networkimprov "package sort" meaning?
sorry, I'm new to Golang

--- Comment #11 by networkimprov ---
https://golang.org/pkg/sort/

--- Comment #12 by codic12 ---
Ah.

--- Comment #13 by codic12 ---
I see, I thought you were talking about sorting packages lol.
An InvertSlice function would make this easy, yes

--- Comment #14 by diamondburned ---
I'd say add `strings.Reverse` and `bytes.Reverse`. A lot of functions from the `bytes` package are similar to `strings`, so why not?

--- Comment #15 by codic12 ---
True, but then `sort.InvertSlice` would also be useful

--- Comment #16 by codic12 ---
Where is the strings package located? I'm gonna do a PR.

--- Comment #17 by codic12 ---
Nvm, found it: https://github.com/golang/go/tree/master/src/strings


--- Comment #18 by networkimprov ---
How to contribute: https://golang.org/doc/contribute.html

I'd wait on the PR until the proposal is accepted; not many proposals are...

--- Comment #19 by codic12 ---
Oops, didn't see that, already made it :(

--- Comment #20 by jimmyfrasche ---
With generics, there could be a Reverse function in the hinted-at slices package that would allow
- `string(slices.Reverse([]byte(s)))`
- `string(slices.Reverse([]rune(s)))`
- whatever the equivalent with grapheme clusters is/would be

It would also work directly on `[]byte` which seems to be the intended use case. I've never had to reverse a string in real code though I have reversed many lists.

As far as I can tell, `strrev` is MS only and deprecated and there are multiple versions of it for the various unicode-aware cases listed above.

--- Comment #21 by gopherbot ---
Change https://golang.org/cl/217120 mentions this issue: `Add `strings.Reverse()``

--- Comment #22 by ianlancetaylor ---
@gsbhasin123 The `strrev` function is non-standard, and as far as I know is only available in old versions of the Microsoft C library.

The C++ generic algorithm `std::reverse` could in Go be implemented using generics, if we had generics.  It would apply to a slice or array, not a string.  In C++ it applies to `std::string` because C++ `std::string` is equivalent to Go `[]byte`, not to Go `string`.

--- Comment #23 by codic12 ---
@ianlancetaylor I did not know that, ah.
> Change https://golang.org/cl/217120 mentions this issue: Add strings.Reverse()``

I just opened that. I didn't read the thing though, so I edited the title and name, but it didn't change on gerrit

--- Comment #24 by codic12 ---
Wait
That was a bot

--- Comment #25 by codic12 ---
https://go-review.googlesource.com/c/go/+/217120 new link

--- Comment #26 by ianlancetaylor ---
I still haven't seen an explanation of whether `strings.Reverse` should reverse bytes or reverse characters, and why.

--- Comment #27 by codic12 ---
Runes (same as characters iirc)

--- Comment #28 by diamondburned ---
RE: generics, why not implement a reflectlite-using function similar to `sort.Slice`?

--- Comment #29 by codic12 ---
Use https://go-review.googlesource.com/c/go/+/217120 for further tracking.

> RE: generics, why not implement a reflectlite-using function similar to sort.Slice?

Might want to open a new issue for this.

--- Comment #30 by diamondburned ---
Why? `reflectlite` is what `sort.Slice` uses, which you'd need for `sort.ReverseSlice`.
