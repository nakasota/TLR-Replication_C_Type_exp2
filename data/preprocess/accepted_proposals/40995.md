=== Fetching Proposal: MDU6SXNzdWU2ODQyMDc1ODM= ===
Issue URL: https://github.com/golang/go/issues/40995

==== [Issue Title] ====
all: add openbsd/mips64 port

==== [Issue Body] ====
This is a tracking bug for getting an openbsd/mips64 port upstreamed - code exists for this at:

https://github.com/4a6f656c/go/tree/openbsd-mips64

==== [Comments] ====

--- Comment #1 by gopherbot ---
Change https://golang.org/cl/250118 mentions this issue: `dashboard: add openbsd-mips64-joelsing builder (reverse)`

--- Comment #2 by gopherbot ---
Change https://golang.org/cl/250119 mentions this issue: `unix: add support for openbsd/mips64`

--- Comment #3 by gopherbot ---
Change https://golang.org/cl/250183 mentions this issue: `runtime: use stacks from system for openbsd/mips64`

--- Comment #4 by gopherbot ---
Change https://golang.org/cl/250579 mentions this issue: `runtime: add defs for openbsd/mips64`

--- Comment #5 by gopherbot ---
Change https://golang.org/cl/250578 mentions this issue: `cmd/dist: add openbsd/mips64 as incomplete port`

--- Comment #6 by gopherbot ---
Change https://golang.org/cl/250580 mentions this issue: `runtime: add support for openbsd/mips64`

--- Comment #7 by gopherbot ---
Change https://golang.org/cl/250581 mentions this issue: `syscall: add support for openbsd/mips64`

--- Comment #8 by gopherbot ---
Change https://golang.org/cl/250583 mentions this issue: `cmd/dist: detect gohostarch for openbsd/mips64`

--- Comment #9 by dmitshur ---
Thanks for making this tracking issue @4a6f656c.

The first entry under https://golang.org/wiki/PortingPolicy#requirements-for-a-new-port is:

> Before any code relating to a port can be added to the main Go repository, the following must all be done:
>
> - A proposal must be filed and accepted in which the Go team accepts overall responsibility for having the new port in the core Go tree. In general, each new port carries an upkeep cost separate from the direct maintenance. That cost varies by port, depending on how similar a new port is to existing ones. The cost must be balanced by an overall benefit in the form of potential new users or use cases for Go.

I'm asking because I can't find an answer in this issue, but has a proposal been already filed, or is that a future task? Or was the intention to use this issue as a proposal?

/cc @andybons @cagedmantis @toothrot

--- Comment #10 by gopherbot ---
Change https://golang.org/cl/250582 mentions this issue: `cmd/link: add support for openbsd/mips64`

--- Comment #11 by 4a6f656c ---
> Thanks for making this tracking issue @4a6f656c.
> 
> The first entry under https://golang.org/wiki/PortingPolicy#requirements-for-a-new-port is:
> 
> > Before any code relating to a port can be added to the main Go repository, the following must all be done:
> > 
> > * A proposal must be filed and accepted in which the Go team accepts overall responsibility for having the new port in the core Go tree. In general, each new port carries an upkeep cost separate from the direct maintenance. That cost varies by port, depending on how similar a new port is to existing ones. The cost must be balanced by an overall benefit in the form of potential new users or use cases for Go.
> 
> I'm asking because I can't find an answer in this issue, but has a proposal been already filed, or is that a future task? Or was the intention to use this issue as a proposal?

@dmitshur 

I was not aware that a proposal was a requirement (obviously this is a relatively new addition to that page and not something I've done for the other eight Go ports that I've authored and/or upstreamed :). As an aside, it would be good if these requirements are going to be enforced then it be done consistently (for example, code exists in the Go 1.15 release for an incomplete port), not to mention that it can take multiple months just to get a builder key...

That said, we might as well use this issue as the proposal (unless you prefer/require a separate one):

- OpenBSD runs on [octeon hardware](https://www.openbsd.org/octeon.html), which is mips64 based - being able to use Go and run Go based software on this platform would be beneficial.

- The Go toolchain already supports mips64 and are there existing OpenBSD ports (386, amd64, arm, arm64) - as such, the code requirement for this port is minimal (effectively openbsd/mips64 specific runtime, syscall glue).

- This platform is big endian, strict alignment and has large physical pages - various aspects of this find bugs in code and have already identified bugs in the Go codebase (fixes for which I'll upstream if/when the port lands).

- Code for this port exists and passes all tests on Go 1.15.

Please let me know if further details are required.

--- Comment #12 by dmitshur ---
@4a6f656c That is no problem and completely understandable—the requirements on the PortingPolicy page have been adjusted recently, as you noticed. We do want to move towards a more consistent enforcement of the requirements, and this change was a part of that process.

Using this issue as the proposal is completely fine; I'll re-title and milestone it that way. Thank you.

--- Comment #13 by 4a6f656c ---
@dmitshur what kind of time frame should I expect on this?

--- Comment #14 by dmitshur ---
@4a6f656c I’m not sure. According to https://github.com/golang/proposal#proposal-review, proposal review meetings happen approximately weekly, but this week may be unusual.

@andybons Do you have a better answer for this?

--- Comment #15 by ianlancetaylor ---
There was no proposal review meeting this week.

--- Comment #16 by rsc ---
Given that we already have openbsd and we have mips64, then assuming we can arrange a builder this seems fine and can be fast-tracked. This seems like a **likely accept**.

@4a6f656c It takes seconds to generate a builder key. If it took months, it meant we missed an email until being reminded; sorry about that. Please ping us sooner if that happens again.

--- Comment #17 by rsc ---
No change in consensus, so accepted.


--- Comment #18 by gopherbot ---
Change https://golang.org/cl/265959 mentions this issue: `cpu: make x/sys/cpu build on non-linux mips64x`

--- Comment #19 by gopherbot ---
Change https://golang.org/cl/266918 mentions this issue: `vendor: update golang.org/x/sys/cpu to latest`

--- Comment #20 by gopherbot ---
Change https://golang.org/cl/266919 mentions this issue: `runtime: allow physical page aligned stacks to be allocated`

--- Comment #21 by gopherbot ---
Change https://golang.org/cl/267606 mentions this issue: `cmd/dist: remove openbsd/mips64 from incomplete ports`

--- Comment #22 by gopherbot ---
Change https://golang.org/cl/267605 mentions this issue: `syscall: use correct type for TIOCSPGRP/TIOCGPGRP`

--- Comment #23 by gopherbot ---
Change https://golang.org/cl/274772 mentions this issue: `internal/socket: add support for openbsd/mips64`

--- Comment #24 by aclements ---
What's the status of openbsd/mips64 at this point? Should there be a release note for this?

--- Comment #25 by 4a6f656c ---
> What's the status of openbsd/mips64 at this point? Should there be a release note for this?

The openbsd/mips64 port is complete and stable, although some functionality (primarily cgo) is still missing.  As such, it probably qualifies for inclusion in the release notes.

--- Comment #26 by gopherbot ---
Change https://golang.org/cl/275333 mentions this issue: `dashboard: remove known issue from openbsd-mips64-jsing builder`

--- Comment #27 by gopherbot ---
Change https://golang.org/cl/275787 mentions this issue: `doc/go1.16: announce openbsd/mips64 port`
