cmd/go: add go doc -json
build better languag support editor ide' could help doc json.
exampl ` get `strings` packag documentation.
via termin flag like `go doc fmt -format json`
doc use gener snippet base documentation.
hi @odeke-em , recommend start look interest issue?
thank much! :slightly_smiling_face:
@joshuabezaleel note proposal. may accepted, far accepted. welcom look issue, propos accept work accept either. thanks.
go/doc packag let get packag doc go data structures. seem like enough.
fail that, gopl clearli way give doc editor helper popups. use? also, generally, gopl way "better languag support editor ide's". needed, gopls, cmd/go url web site.
/cc @stamblerr
lsp support plaintext markdown hover (see `gopls` experiment structur hover format use json. could expos command line via `gopl definition` command, alreadi `-json` flag. code command found here.
@stamblerre, gopl get doc data structure? use go/doc parsing?
@paulvollmer, tri use go/doc? anyth miss does?
@rsc use `go doc` get fast way docs.
think use go doc also machin readabl format.
exampl `go doc net/http -json` get doc net/http packag json output.
mayb alreadi tool that. html page golang.org/pkg generated?
@rsc: `gopls` borrow lot code `go/doc` convert document markdown (comment.go) use `go/doc` directli get synopsis. rest data structur construct use type information.
go/doc alreadi defin data structure, doc.package.
believ 'go doc' creat one use go/doc format text.
could say -json dump doc.packag json.
would let us reus api alreadi defin go/doc instead defin someth new.
@paulvollmer, got doc.packag go doc -json would work use case? (we may need creat parallel structur go/token go/ast piec properli converted, could do.) least seem like plausibl path forward consist variou -json flag cmd/go.
thoughts?
@rsc yes, think provid machin readabl data mind. let know help work task.
thank respons @paulvollmer.
seem like **like accept**.
like work implementation, pleas feel free.
leav open week final comments.
ðŸ‘ look insid `go doc` tool use `doc.package` marshal doc data json.
chang consensus, **accepting**.
hi @jayconrod , issu still open good one beginners? recommend start look interest this?
thank much advance! :slightly_smiling_face:
hi @joshuabezaleel - good see here. pleas take look russ' comment implement needs.
requir knowledg go/doc sibl packages. would want dump content doc.packag whatev els necessari display full information.
chang mention issue: `cmd/doc: add json flag`
good news: (from cl, probabl worth discuss though)
> chang make naiv initi attempt add json output
> cmd/doc. unfortun valid, popul go/doc.packag var cannot
> directli serialised, due pointer cycl sever *go/ast.object
> fields. opinion decis made nil break fields.
>
> correct, long term solut commit serialis
> interface, howev seem scope change, due
> larg amount data complex contain within go/doc.package.
> first option would defin check wire format like
> cmd/go/internal/modcmd.editmodulejson. alternatively, use
> exist go/doc.packag serialisable, may undesirable.
would interest too. use case auto-gener yaml / json openapi represent go struct consum json rest api. particularli interest use comment struct field descript openapi properti description.
