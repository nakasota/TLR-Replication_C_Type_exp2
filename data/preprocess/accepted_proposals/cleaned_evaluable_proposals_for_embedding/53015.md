text/template: add "return" action
current good way cleanli stop templat execut early.
propos add `return` action stop execut current template, without error. use nest templates, call templat keep executing. is, `return` scope current template.
partial implement simpl funcmap entri (custom) sentinel error:
```go
"return": func() (string, error) {
    return "", ErrStop
}
```
go code execut templat recogn `errstop` ignor it. however, implement stop entir templat execution, includ caller (parent) templates. one write altern funcmap implement `template` action handl errstop. that' lot machinery, must buffer intermedi templat result.
altern wrap larg chunk templat `if` blocks, bad readability.
given go style encourag earli exits, templat packag ought support it.
cc @robpik @mvdan
propos ad activ column propos project
review weekli propos review meetings.
â€” rsc propos review group
@josharian know whether trivial change?
idea. suspect (return sentinel error, handl sentinel error), tri it. i?
appear trivial, although histori text/template, approach might unwelcome. cobbl togeth minimum effort. (it obvious need doc probabl tests.)
look entir reasonable. put panic break continue; use return seem ok.
/cc @robpik thought whether want add 'return'.
return error? option return error? never want facility, experi lean regard behave.
fairli trivial write funcmap entri return error (see op).
sure error would come from: typic case, error come funcmap call, alreadi interrupt control flow. error would pass via execut (weird), accept type thing error pass fmt.sprint errors.new.
oppos option error, definit want make required.
thought, donâ€™t think accept error, would creat expect call templat would also exit. properti difficult achiev funcmap precis nest templat return earli impact call templates.
gener templat return values, plain return alon seem like make sense: like break/continu overal current templat "call" enclos loop.
given templat donâ€™t return values, would â€œexitâ€ clearer?
> given templat donâ€™t return values, would â€œexitâ€ clearer?
neither functions. :) chose "return" match language, like if, else, break, on. one except list range, still trip everi time use it.
base discuss above, propos seem like **like accept**.
â€” rsc propos review group
sure actual proposed. convers drift bit. someon pleas clarify? realli exit earli current templat invocation, continu execution? so, also need "exit", also suggest here?
actual problem solved? import stop execut early? liter never want that.
> realli exit earli current templat invocation, continu execution?
yes.
> so, also need "exit", also suggest here?
think so. "exit" easili implement use funcmap; "return" cannot. laid detail origin proposal.
> actual problem solved?
lot templat form:
```
{{ if .X }}
lots of stuff
{{ end }}
```
would like abl remov layer (virtual) indent write (a would code):
```
{{ if not .X }}
{{ return }}
{{ end }}
lots of stuff
```
chang consensus, **accepted**. ðŸŽ‰
