crypto/x509: add certpool.equ
### version go use (`go version`)?
go 1.16.x
### expect see?
respons #45891, `x509.certpool` struct longer compar `reflect.deepequal`, way export certificates, longer way fulli compar structs.
`certpool.subjects` use shallow comparison, show complet comparison.
ad `equal(oth certpool) bool` type compar directly, go-cmp automat use method comparison.
recent version go, certpool intern repres lazi set certif might fulli load yet.
"equal" mean proposal? would want load disk yet?
give background use this?
> recent version go, certpool intern repres lazi set certif might fulli load yet.
yes, believ chang prevent `reflect.deepequal` work (#45891).
#45891 context. test use `reflect.deepequal` compar two `x509.certpool`, work fine go1.15.x. go 1.16.x test longer work two effect equival cert pool longer consid equal.
would expect `equal` load content disk compar content use `reflect.deepequal`, think make equival use `reflect.deepequal` go1.15.x.
propos ad activ column propos project
review weekli propos review meetings.
â€” rsc propos review group
/cc @filosottil whether reason api addit
talk filippo said reason do. plan keep cert pool opaqu deriv system pool, easi tell two differ pool includ system pool not.
anyon object this?
anyon actual non-test use this? someth come commonly? sound like could end unexpectedli slow heavy-weight function.
@tmthrgd filippo say implement efficiently. definit certpool.equ would "same 'use system pool' set addit certificates". system pool need consult implement equal.
base discuss above, propos seem like **like accept**.
â€” rsc propos review group
> @tmthrgd filippo say implement efficiently. definit certpool.equ would "same 'use system pool' set addit certificates". system pool need consult implement equal.
happi wrong, base request/requir above: â€œi would expect equal load content disk compar content use reflect.deepequal[.]â€ sound decept expens me. though itâ€™ expensive, doesnâ€™t seem real reason oppos it.
> would expect equal load content disk compar content use reflect.deepequal, think make equival use reflect.deepequ go1.15.x.
clear, won't. compar whether two certpool say "includ what' disk" not.
chang consensus, **accepted**. ðŸŽ‰
