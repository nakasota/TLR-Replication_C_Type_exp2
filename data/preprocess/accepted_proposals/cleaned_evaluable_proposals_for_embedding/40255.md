all: drop go386=387 support go 1.16
propos drop 387 floating-point support requir sse2 support goarch=386 nativ gc compil go 1.16. would rais minimum goarch=386 requir intel pentium 4 (releas 2000) amd opteron/athlon 64 (releas 2003).
would need pre-announc 1.15 releas notes. (i'v put 1.15 mileston reason.)
sever benefit this:
1. 387 support isn’t huge mainten burden, take time away perform featur work repres fair amount latent complexity.
2. 387 support regular sourc bug (#36400, #27516, #22429, #17357, #13923, #12970, #4798, name few).
3. 387 bug often go undetect long time don’t builder support 387 (so unsupport instruct slip unnoticed).
4. rais minimum requir sse2 would allow us also assum mani use architectur features, proper memori fenc 128 bit registers, would simplifi compil runtim allow much effici implement core function like memmov 386.
5. we’r explor switch register-bas call convent go 1.16, promis signific perform improvements, retain 387 support definit complic slow progress.
gccgo toolchain continu support 387 floating-point, remain option project absolut must use 387 floating-point.
propos golang-nut get feedback signific use go386=387, particularli use gccgo would viabl option.
chang mention issue: `doc/go1.15: announc go386=387 deprecation`
wait littl longer public comment, gone ahead prepar pre-announc releas notes. (we could also submit releas note chang roll back necessary.)
nick craig-wood point golang-nut make sure go386=387 fail use error messag drop (rather than, say, start ignor go386 environ variabl entirely).
perhap silli question, would affect goarch=amd64 all?
@mvdan, would not.
guess one still old computer. emul coprocessor support also still use certain embed systems. would keep featur around years.
known system still exist support sse2. sever too. would interest user reli current version go hobbyist use cant use gccgo.
gone ahead submit deprec notic 1.15 releas notes. however, issu still propos review. get declined, revert cl. ask get review next week' propos review meeting.
went propos minut last week, @aclement mail golang-nut golang-dev well. let' leav open anoth week move like accept, seem much pushback here.
base discuss above, seem like **like accept**.
long, 387, thank floating-point errors.
one data point: today somebodi ask 387 binari
alreadi cross-compil number architectur ( easi add 387 list. use gccgo, though, bit harder. perhap add doc link releas note point gccgo instruct build static 387 binaries?
build static execut gccgo: `go build -compiler=gccgo -gccgoflags=-static`.
note gccgo execut use c libraries, static execut gnu/linux system limitations, glibc gener expect dynam linked. specif /etc/nsscache.conf valu supported, unless dynam c librari also present run time.
feedback keep support seem come user amd geod gx/lx (the kind mmx sse sse2) board still use embed space (e.g. router like alix boards).
im favor drop 387. altern go1.16 could made reinterpret go386=387 mean use softfloat support instead 387 sse2 instructions. would make ordinari go program 387 hardwar still work, slower. would make regist base call convent still easier platform (e.g. arm mips) also requir softfloat support. would also mainstream platform builder test softfloat code path frequently.
upsid e.g. athlon xp pentium ii/iii (there quit alot produc window xp time) keep work linux distro dont need switch away go gc gogcc packag builder 386 distro support older hardware. would allow linux distro keep use build/verif process place 386 amd64.
verifi newer instructionset use could potenti use someth like:

chang consensus, accepted.
chang mention issue: `cmd/compile: prevent 387+float32+pi clobber registers`
chang mention issue: `[release-branch.go1.15] cmd/compile: prevent 387+float32+pi clobber registers`
chang mention issue: `[release-branch.go1.14] cmd/compile: prevent 387+float32+pi clobber registers`
chang mention issue: `src/buildall.bash: remov linux-386-387 target`
small question here. `go386`?
sinc `go386` use select `387`, drop it. get rid *completely*, want keep around, error `go386` still set `387`. otherwise, silent gener `sse2` binari `387` requested.
would keep around gener error.
( strongli prefer addit remov redefinitions, ignor `go386=387` would redefinition.)
agre keep error set anyth sse2 (see also previou comment).
chang mention issue: `all: drop 387 support`
chang mention issue: `dashboard: remov linux-386-387 builder`
replac 387 support softfloat support `go386=softfloat` cl 260017 260137.
anyon machin without sse support, pleas tri tip let us know works.
@beoran
chang mention issue: `dashboard, cmd/gomote: remov linux-386-387 builder`
