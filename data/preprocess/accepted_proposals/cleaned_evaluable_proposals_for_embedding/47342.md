hash/maphash: provid `purego` implement
### version go use (`go version`)?
1.17rc1
### oper system processor architectur use (`go env`)?
gopherj go 1.17
### do?
improv perform `hash/maphash` package, make packag even "less" safe before. 1.16 work around gopherj (where pointer arithmet possible) recent chang requir much larger delta, everi caller `rthash` need updated, use call semant similar 1.16 version.
### <strike>expect</strike> hope see?
`purego` implement `hash/maphash` would solv problem. perhap would use scenario well?
cc @dmitshur
initi reaction "i thought purego avoid asm cgo, unsafe", wrong:
propos replac `hash/maphash` purego implementation? implement would be?
`unsafe` use packag perform reasons. differ implement would probabl need equal fast.
> propos replac `hash/maphash` purego implementation?
no. would keep exist one perform useable, add purego version behind build tags.
> implement would be?
tbd. probabl logic equival gopherj (i.e. slight variat go 1.16 version).
far purego tag main repo crypto libraries. think there' higher level decis made much want sprinkl standard librari purego backstops. instance, probabl need purego builder test code works.
(big) concern, sound reason me.
propos ad activ column propos project
review weekli propos review meetings.
â€” rsc propos review group
net os/us netgo osusergo tag instead purego.
purego see crypto packages.
however, look like accept idea purego get around document it:
given that, seem fine purego hash/maphash.
sure mayb accept first?
#23172 accepted. need done.
base discuss above, propos seem like **like accept**.
â€” rsc propos review group
chang consensus, **accepted**. ðŸŽ‰
