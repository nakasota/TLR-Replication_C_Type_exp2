io/ioutil: reject path separ tempdir, tempfil pattern
`prefix` `suffix` extract variabl `pattern` use `filepath.join`. sinc filter place, could lead directori travers vulnerabilities.
example, follow valu pattern creat unexpect behaviour:
`ioutil.tempfile("/tmp", path.base("../../somewhere/else.*.suffix"))
`
less-surpris behaviour would call `path.base`:
`name := filepath.join(dir, path.base(prefix+nextrandom()+suffix))
`
exampl real go code pass string constant second argument `ioutil.tempfile`?
quick github search find first pages. that' publicli avail code
regardless, current behaviour unexpect small chang avoid peopl shoot themself foot.
well, tradeoff. program intent use directori traversal, break them. program accident use it, fix them. know actual case would fixed, conserv approach leav well enough alone.
find publicli avail code use directori travers purpose. guess peopl would put travers first argument need to...
can't find exampl use either intent unintentionally, doubt make behav safely, presum go break much, might prevent secur issu future.
also, `pattern` even document accept path separators, definit make send `dir`.
@ianlancetaylor think?
comment @filosottil sound reason me.
> name := filepath.join(dir, path.base(prefix+nextrandom()+suffix))
pleas this. suffix slash it? random remov entirely.
go anyth all, simpli make tempfil return error pattern contain file system path separator.
make problemat case (which think happen ever real programs) silent succeed unexpect meaning. assum simpli return error instead, seem like **like accept** base discussion. everyon agre someth one think matter real programs.
leav open week final comments.
chang consensus, **accepting**.
chang mention issue: `ioutil: reject path separ tempdir, tempfil pattern`
