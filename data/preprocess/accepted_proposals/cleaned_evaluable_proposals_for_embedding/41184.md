cmd/go: continu convers bug-resist //go:build constraint
june post draft design move `// +build` line ad-hoc syntax `//go:build` line standard boolean expressions; doc also link video overview prototyp implementation.
propos adopt design, n = 17 transit section, mean prep work would happen go 1.16, main chang would land go 1.17, transit would final go 1.18.
base emoji lack object (along overwhelmingli posit reddit thread), seem like **like accept**.
post reddit:
chang consensus, accepted.
pleas note accept mean //go:build line start work _go 1.17_, go 1.16.
everyon rush put in.
chang mention issue: `go/build: reject //go:build without // +build`
chang mention issue: `cmd/go: add ignoredotherfil go list; pass ignoredfil vet`
chang mention issue: `cmd/compile: reject misplac go:build comments`
chang mention issue: `cmd/asm: reject misplac go:build comments`
chang mention issue: `cmd/vet: look ignor file buildtag check`
chang mention issue: `cmd: go get golang.org/x/tools@d88ec18 && go mod vendor`
go 1.16 prep work //go:build line landed.
retitl remileston issu track go 1.17 work.
chang mention issue: `go/build/constraint: add parser build tag constraint expressions`
chang mention issue: `cmd/vet: updat buildtag check //go:build lines`
chang mention issue: `go/printer: canonic //go:build // +build line formatting`
chang mention issue: `go/build: prefer //go:build // +build lines`
chang mention issue: `api/go1.16: add build/constraint apis`
chang mention issue: `doc/go1.16: document go/build/constraint package`
chang mention issue: `cmd/fix: add buildtag fix`
chang mention issue: `all: go fmt std cmd (but revert vendor)`
effect go1.4-bootstrap transit final go 1.18?
took master@d4b2638234 crude remov `//+build` lines:
$ find . -name '*.go' -exec sed -i '/\/\/ +build /d' {} \;
that, could longer bootstrap `master` `go1.4`:
dennis@inara:/opt/golang$ update-golang.pi denni
build go cmd/dist use /opt/golang1.4. (go1.4-bootstrap-20170531 linux/amd64)
# _/opt/golang/src/cmd/dist
cmd/dist/util_gccgo.go:9: usevfpv1 redeclar block
previou declar cmd/dist/util_gc.go:11
cmd/dist/util_gccgo.go:11: usevfpv3 redeclar block
previou declar cmd/dist/util_gc.go:15
cmd/dist/util_gccgo.go:13: usearmv6k redeclar block
previou declar cmd/dist/util_gc.go:20
error: /opt/golang/src/make.bash return
`go/build/constraint` backport go1.4?
compil kept build go 1.4 now.
mean keep // +build comments.
plan propos bump bootstrap version go 1.17,
though, varieti reasons, done that,
abl remov // +build comments.
go 1.17 prep work //go:build line landed.
remileston issu track go 1.18 work
(submit golang.org/cl/240611).
chang mention issue: `unix: add //go:build line gener files`
chang mention issue: `all: add //go:build line assembl files`
chang mention issue: `cmd/vendor: updat golang.org/x/si latest`
chang mention issue: `all: add //go:build line assembl files`
chang mention issue: `all: updat golang.org/x/si latest`
chang mention issue: `runtime/internal/sys: gener //go:build line gengoos.go`
chang mention issue: `all: gofmt (but vendor, testdata, top-level test directories)`
issu current label early-in-cycl go 1.18.
time now, friendli ping issu look again.
