cmd/go: provid build tag architectur environ variabl
propos cmd/go automat set build tag architectur environ variabl specified.
architectur option go[arch]=[option] enabled, cmd/go set [arch].[option] build tag. example, goarm=6 enabled, cmd/go set "arm.6" build tag; goarm=7 enabled, set "arm.6" "arm.7" build tag (sinc goarm=7 superset goarm=6).
precedent: alreadi set goexperiment.foo goexperiment=foo option that' set.
questions:
- default flags? need/want still set "arm.5", even though that' alway implied?
- goarm use "5", "6", "7", goppc64 use "power8", "power9". cmd/go use "ppc64.power9"? "ppc64le.power9" goarch=ppc64le?
- hardfloat/sse2 vs softfloat? reason provid 386.sse2, user check !386.softfloat? fact, sinc softfloat exist across architectures, mayb common "softfloat" tag use instead addition?
> default flags? need/want still set "arm.5", even though that' alway implied?
possibl add subset option future? (for example, someth intermedi amd64 v1 v2?) so, think set build tag default, carefully-written code fall back platform-independ implement compil subset smaller default (such case 386 `softfloat` transition).
> possibl add subset option future? (for example, someth intermedi amd64 v1 v2?)
hope to, want rule yet either.
gowasm establish pattern environ variabl comma-separ list.
also think go386 introduc "387" etc. anoth axis, comma-separated. (for risc-v, would especi need comma-separ list extensions.)
need figur list maps. presum item list becom separ "arch.thing" tag.
also need figur inclusion. presum write code special case `//go:build amd64.v2` next day v3 come out, want code still work. match "that set futur one impli it", go version (the `go1.11` tag set go 1.12 later well go 1.11). particular, `arm.5` would true even build goarm=6. say `arm.5 && !arm.6` get 5-only. (it' nice real boolean expressions!)
seem like appli special shorten like ppc64le.9. let' use environ variabl syntax is. (ppc64le.power9 make sens ppc64le anywaybecaus call architectur "power9".)
propos ad activ column propos project
review weekli propos review meetings.
â€” rsc propos review group
leav minut anoth week move like accept, seem like head there. last call objections.
base discuss above, propos seem like **like accept**.
â€” rsc propos review group
chang consensus, **accepted**. ðŸŽ‰
