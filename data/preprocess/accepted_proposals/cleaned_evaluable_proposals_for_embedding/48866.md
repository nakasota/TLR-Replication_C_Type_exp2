mime: allow duplic media paramet equal valu
[thi duplic propos #28618, close due `time state waitingforinfo.` accept discussion.]
mail user agent (mua) (incorrectly) gener mail header duplic paramet names, one receiv recent (duplic `boundary`):
```
Content-Type: multipart/alternative; boundary="----RTIR0GV26TDW15Q5CVX979LBL6XN18"; boundary="----RTIR0GV26TDW15Q5CVX979LBL6XN18"
```
golang standard librari `mime.parsemediatype()` allow duplic media paramet imposs pars header (it return error `mime: duplic paramet name`).
suggest make `mime.parsemediatype()` function toler errors, example, use first valu ignor rest. least stop execut duplic paramet value.
---
see also:
- #28618, @xeruf report similar mail header: `content-type: text/html; charset=utf-8; charset=utf-8`
- #47602, @xym01 report similar http header: `content-type: multipart/form-data;boundary="boundary";boundary="another-boundary"`
@iredmail mua specif gener kind message?
/cc @neild
propos ad activ column propos project
review weekli propos review meetings.
â€” rsc propos review group
> @iredmail mua specif gener kind message?
unfortun email contain header like `x-mailer:` identifi mua program, know. :(
- email sent 24 feb 2020, sinc use `mime` packag pars email messag archiv purpose, normal need pars lot old email might non-rfc-compliant.
- email messag easi forge, mani mua (especi email market spam tools) gener standard emails, also normal receiv non-rfc-compli messages.
sound like propos continu reject duplic boundary= paramet special case duplic say boundari value, ok. there' least one buggi program gener these, intent least pretti clear.
right?
right.
unlik duplic paramet differ values, there' need judg one use final value, ideal allowed. :)
note: ideal appli duplic paramet value, `boundary=`. :)
base discuss above, propos seem like **like accept**.
â€” rsc propos review group
chang consensus, **accepted**. ðŸŽ‰
