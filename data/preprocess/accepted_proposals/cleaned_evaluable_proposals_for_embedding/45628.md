encoding/xml: add decoder.inputpo
<!--
pleas answer question submit issue. thanks!
question pleas use one forums:
-->
### version go use (`go version`)?

$ go version
go version go1.16 darwin/amd64

### issu reproduc latest release?
### oper system processor architectur use (`go env`)?
<details><summary><code>go env</code> output</summary><br>
$ go env
go111module=""
goarch="amd64"
gobin=""
gocache="/var/folders/md/l2nnr5490tq114003qtxfnk40000gn/t//gocache"
goenv="/users/patrick/library/appl support/go/env"
goexe=""
goflags=""
gohostarch="amd64"
gohostos="darwin"
goinsecure=""
gomodcache="/users/patrick/go/pkg/mod"
gonoproxy=""
gonosumdb=""
goos="darwin"
gopath="/users/patrick/go"
goprivate=""
goproxy="
goroot="/usr/local/cellar/go/1.16/libexec"
gosumdb="sum.golang.org"
gotmpdir=""
gotooldir="/usr/local/cellar/go/1.16/libexec/pkg/tool/darwin_amd64"
govcs=""
goversion="go1.16"
gccgo="gccgo"
ar="ar"
cc="clang"
cxx="clang++"
cgo_enabled="1"
gomod="/users/patrick/prog/go/xml/xmltolua/go.mod"
cgo_cflags="-g -o2"
cgo_cppflags=""
cgo_cxxflags="-g -o2"
cgo_fflags="-g -o2"
cgo_ldflags="-g -o2"
pkg_config="pkg-config"
gogccflags="-fp -arch x86_64 -m64 -pthread -fno-caret-diagnost -qunused-argu -fmessage-length=0 -fdebug-prefix-map=/var/folders/md/l2nnr5490tq114003qtxfnk40000gn/t/go-build1589123002=/tmp/go-build -gno-record-gcc-switch -fno-common"
</details>
### do?
use packag `encoding/xml` program languag similar xslt. like provid user feedback someth semant wrong input. exampl user forgotten initialis variable. case xml syntax correct.
want tell user "you problem line xyz" cannot get current line xml decoder. thu propos add function xml packag similar `func (d *decoder) inputoffset() int64 { return d.offset }`:
```go
// InputLine retuns the line of the current decoder position.
// The line gives the location of the end of the most recently returned token.
func (d *Decoder) InputLine() int {
	return d.line
}
```
test case would someth like this:
```go
func TestInputLineNum(t *testing.T) {
	testInput := "<P>Fo\no<P>\n<P>Bar</P>\n"
	linenumbers := []int{1, 2, 2, 3, 3, 3, 3, 4}
	d := NewDecoder(strings.NewReader(testInput))
	var err error
	for c := 0; c < len(linenumbers); c++ {
		_, err = d.Token()
		if err != nil {
			t.Errorf("expected no error on d.Token()")
		}
		if have, want := d.InputLine(), linenumbers[c]; have != want {
			t.Errorf("d.InputLine() = %d, want %d (c = %d)", have, want, c)
		}
	}
}
```
happi provid pull request, sinc function trivial, post well.
duplic #43589 ?
@seankhliao bad. think close creat pull request #43589?
consid new api similar recent chang encoding/csv, let put popos process
close one one flesh out.
cc @rsc via owner
ad code gerrit
chang mention issue: `encoding/xml: expos decod line number`
propos ad activ column propos project
review weekli propos review meetings.
â€” rsc propos review group
#44221, start line number end return (line, column int) column 1-base count byte (not runes). seem like probabl thing would worthwhil here? method
(*decoder) inputpos() (line, column int)
?
make sens return line. good point.
@rsc sure come decent implement column valu though. could increas column counter everi time byte read set 0 `\n` encountered, work (d *decoder) ungetc() `\n` unread.
otherwis one could read backward call new function `inputpos` begin line found, uncertain deal read backward `io.bytereader`.
perhap record byte offset start line (use `decoder.offset` field) comput column number subtract current offset.
mistakenli assum `ungetc()` unget one byte immedi follow `getc()`. implement rather simple.
updat code gerrit.
base discuss above, propos seem like **like accept**.
â€” rsc propos review group
fwiw, ad line-track logic `encoding/json` basi would non-trivi slow common case. see
think #44221 serv exist preced added. csv format fundament requir track new line occur sinc newlin delimit records. contrast, neither json xml grammar newlin semant signific beyond whitespac characters.
@dsnet line number alreadi there. addit simpl count offset imo trivial (in sens comput complex / comput time) operation.
sure correct line number inher use grammar purposes, help give feedback user applic case error. necessarili syntax error.
(edit:)
also think #44221 _reason_ add inputpos. mere suggest function signatur use reason symmetry.
> line number alreadi there.
@pgundlach, correct. seem line inform alreadi leak api `syntaxerror.line` field. words, `xml` packag alreadi commit take comput cost count lines.
> help give feedback user applic case error. necessarili syntax error.
line inform useful, perform also good goal. regardless, perform ship alreadi sail point out. argument longer basi context `xml`.
@dsnet cours add oper overal process, read "the perform ship alreadi sailed" get impress want say line count *dramatically* slow processing. (quick representative) benchmark show rather similar result without line count column count ad in.
```
goos: darwin
goarch: amd64
pkg: xml
cpu: Intel(R) Core(TM) i7-5557U CPU @ 3.10GHz
current state: with line number counting
BenchmarkLineno-4   	    1258	    957099 ns/op	  112704 B/op	    3119 allocs/op
BenchmarkLineno-4   	    1117	    996439 ns/op	  112704 B/op	    3119 allocs/op
BenchmarkLineno-4   	    1162	    979260 ns/op	  112704 B/op	    3119 allocs/op
BenchmarkLineno-4   	    1153	   1029538 ns/op	  112704 B/op	    3119 allocs/op
BenchmarkLineno-4   	    1138	    997193 ns/op	  112704 B/op	    3119 allocs/op
without line number counting
BenchmarkLineno-4   	    1285	    935848 ns/op	  112704 B/op	    3119 allocs/op
BenchmarkLineno-4   	    1178	    988658 ns/op	  112704 B/op	    3119 allocs/op
BenchmarkLineno-4   	    1136	    970551 ns/op	  112704 B/op	    3119 allocs/op
BenchmarkLineno-4   	    1213	    966737 ns/op	  112704 B/op	    3119 allocs/op
BenchmarkLineno-4   	    1254	    952503 ns/op	  112704 B/op	    3119 allocs/op
BenchmarkLineno-4   	    1266	    980071 ns/op	  112704 B/op	    3119 allocs/op
BenchmarkLineno-4   	    1198	    930091 ns/op	  112704 B/op	    3119 allocs/op
BenchmarkLineno-4   	    1252	    922722 ns/op	  112704 B/op	    3119 allocs/op
BenchmarkLineno-4   	    1203	    928346 ns/op	  112704 B/op	    3119 allocs/op
with line number and offset counter
BenchmarkLineno-4   	    1254	    947150 ns/op	  112704 B/op	    3119 allocs/op
BenchmarkLineno-4   	    1198	    945277 ns/op	  112704 B/op	    3119 allocs/op
BenchmarkLineno-4   	    1117	   1011851 ns/op	  112705 B/op	    3119 allocs/op
BenchmarkLineno-4   	    1234	    949347 ns/op	  112704 B/op	    3119 allocs/op
BenchmarkLineno-4   	    1198	   1043049 ns/op	  112704 B/op	    3119 allocs/op
BenchmarkLineno-4   	    1152	   1004838 ns/op	  112704 B/op	    3119 allocs/op
```
number within rang can't tell differ due algorithm due thing happen comput right now. would need better benchmark see much time thing add xml parsing.
wich i' expect
```go
	if b == '\n' {
		d.line++
	}
```
absolut neglig term comput time compar rest code.
exist parser `xml` `json` packag fairli slow. thus, ad `if b == '\n' { d.line++ }` **today** neglig cost. case json, heavili optim parser order magnitud faster, line count logic impos non-trivi perform cost (5-15% recall).
@dsnet ok, fair enough, good point.
skeptic count fundament can't done effici even faster json. that' issu today.
chang consensus, **accepted**. ðŸŽ‰
