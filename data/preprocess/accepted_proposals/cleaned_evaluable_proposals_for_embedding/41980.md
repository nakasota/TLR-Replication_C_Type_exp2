testing: show diff incorrect output exampl test
### version go use (`go version`)?

$ go version
go version go1.15.1 darwin/amd64

### issu reproduc latest release?
ye
### oper system processor architectur use (`go env`)?
<details><summary><code>go env</code> output</summary><br>
$ go env
go111module=""
goarch="amd64"
gobin=""
gocache="/users/home/library/caches/go-build"
goenv="/users/home/library/appl support/go/env"
goexe=""
goflags=""
gohostarch="amd64"
gohostos="darwin"
goinsecure=""
gomodcache="/users/home/go/pkg/mod"
gonoproxy=""
gonosumdb=""
goos="darwin"
gopath="/users/home/go"
goprivate=""
goproxy="
goroot="/usr/local/go"
gosumdb="sum.golang.org"
gotmpdir=""
gotooldir="/usr/local/go/pkg/tool/darwin_amd64"
gccgo="gccgo"
ar="ar"
cc="clang"
cxx="clang++"
cgo_enabled="1"
gomod="/users/home/mystuff/kama/go.mod"
cgo_cflags="-g -o2"
cgo_cppflags=""
cgo_cxxflags="-g -o2"
cgo_fflags="-g -o2"
cgo_ldflags="-g -o2"
pkg_config="pkg-config"
gogccflags="-fp -m64 -pthread -fno-caret-diagnost -qunused-argu -fmessage-length=0 -fdebug-prefix-map=/var/folders/gc/sfs6hvtd1r392kn91n3jp17m0000gn/t/go-build416873732=/tmp/go-build -gno-record-gcc-switch -fno-common"
</details>
### do?
creat test exampl (
reproduc issu
### expect see?
exampl test fail mismatch output stdout test runner expect output be.
unfortun test examples(unlik normal tests), abl programmat get test output examine(via dif otherwise) compar expect result.
### see instead?
way access(programmatically) output test.
way abl achiev want via follow bad hack;
```diff
diff --git a/src/testing/run_example.go b/src/testing/run_example.go
index 10bde49e5b..b1c86f54d2 100644
--- a/src/testing/run_example.go
+++ b/src/testing/run_example.go
@@ -16,6 +16,8 @@ import (
        "os"
        "strings"
        "time"
+
+       "github.com/google/go-cmp/cmp"
 )
 func runExample(eg InternalExample) (ok bool) {
@@ -54,6 +56,12 @@ func runExample(eg InternalExample) (ok bool) {
                os.Stdout = stdout
                out := <-outC
+               got := strings.TrimSpace(out)
+               want := strings.TrimSpace(eg.Output)
+               diff := cmp.Diff(want, got)
+               fmt.Println("diff:")
+               fmt.Println(diff)
+
                err := recover()
                ok = eg.processRunResult(out, timeSpent, err)
        }()
```
> way access(programmatically) output test.
consid `-json` flag `go test`? example:
```
{"Time":"2020-10-14T20:22:16.736222-04:00","Action":"output","Package":"m.test","Test":"ExampleHello","Output":"Hello \n"}
...
{"Time":"2020-10-14T20:22:16.736237-04:00","Action":"output","Package":"m.test","Test":"ExampleHello","Output":"Hello\n"}
```
> consid -json flag go test?
guess would work somehow. would run `go test` use anoth program pars output compar `got` `wanted` part output.
anoth alternative, could use `os/exec` run `os.args[0]` subprocess, either run gener `examplehello` test invok origin `examplehello` function directly. (see note work playground due #41339.)
could either extract `want:` output pars output subprocess, use `go/doc.examples` extract programmatically.
come think it, would pretti straightforward encapsul approach comment extern library. api could look someth like:
```go
// RegisterExamples registers the given example functions so that they can be run by test functions.
//
// If this process is a subprocess started by ExampleOutput, RegisterExample
// runs the requested example function and then exits with status 0.
func RegisterExamples(m *testing.M, examples ...func())
// ExampleOutput returns the output of the given example function,
// obtained by executing the test executable as a subprocess.
//
// The function must have been passed to RegisterExamples in TestMain.
//
// If the current platform cannot execute subprocesses, RunExample skips t.
func RunExample(t testing.TB, example func()) (stderr, stdout string, err error)
// ExampleOutput returns the output of example, which must be an Example function
// recognized by 'go test'.
func ExampleOutput(t testing.TB, example func()) (want string)
```
trap here, name ad infinit new api packag test individu need come up.
need test limit amount things. alreadi get hard rememb everything.
look issu see test need new api instead exampl test output need better job highlight differences, show diff. mayb instead?
> look issu see test need new api instead exampl test output need better job highlight differences, show diff. mayb instead?
would excellent.
retitl suggest made last week, name show diffs.
anyon object that?
diff packag would use this? `gofmt -d` reli system' `diff` program, think that' good idea testing.
@josharian work perhap could vendor intern package.
find reason diff package. sit around too.
base discussion, seem like **like accept**.
chang consensus, accepted.
chang mention issue: `testing: add dif clearli discern exampl test failur output`
file pretti similar proposal, fyi :)
accept 4 year ago... still production? (i'm go v1.22.1)
interim altern anyon els read look help, publish `gotestdiff` filter help find individu differ `got:` `want:` block fail `example` functions.
e.g.
```sh
% go test | gotestdiff
--- FAIL: ExampleNonObvious (0.00s)
changed line 1
         +
    got  | neccesary
    want | necessary
         +
extra output at line 4
         +
    got  | discrepancy
         +
changed line 6
         +
    got  | mixEd case
    want | mIxEd case
         +
```
interested:
```sh
go install codeberg.org/japh/gotestdiff@latest
```
see sourc
