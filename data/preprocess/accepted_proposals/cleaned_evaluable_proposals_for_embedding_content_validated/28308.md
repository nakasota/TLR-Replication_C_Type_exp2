cmd/vet: flag use %s:%d construct network address
recent diagnos bug someoneâ€™ go program user report couldnâ€™t get program connect, turn issu programm use `fmt.sprintf("%s:%d", host, port)` instead `net.joinhostport` construct network address pass `net.dial`: issu subtle: `net.joinhostport` correctli handl ipv6 address liter (e.g. 2001:4860:4860::8888), wherea fmt.sprintf doesnâ€™t.
similar issu use `strings.split` instead `net.splithostport`.
notic issu fairli prevalent, like programm arenâ€™t accustom use ipv6 liter yet, expect becom common ipv6 adopt continu grow.
propos ad vet check flag use %s:%d format string argument whose name contain port, addr, host, listen bind. heurist flag 12356 occurrencesÂ¹ found github use bigquery, hope make programm awar net.joinhostport also net.splithostport, write check significantli harder.
send cl implement this. let know think.
â‘  bigqueri queri use was:
```
WITH lines AS
  (SELECT
    id,
    SPLIT(content, "\n") AS line
  FROM `gocontents.gocontents`)
SELECT path, flattened_line
FROM lines
CROSS JOIN UNNEST(lines.line) AS flattened_line
JOIN `gocontents.gofiles` AS files ON files.id = lines.id
WHERE
  REGEXP_CONTAINS(flattened_line, r"fmt.Sprintf\(\"%s:%d\", (port|addr|host|listen|bind)")
```
definit check correct frequenc requir vet check - issu lead bugs, happen often.
however, sure tick precis requirement. check simpli inspect syntax tree, could prone fals posit negatives. dominik propos slightli differ approach tool example.
agre want look fmt.sprint output feed net.dial, variabl names.
otherwis seem reasonable.
also seem like want find x+":"+z dial argument.
overal seem doabl vein printf wrapper detector alreadi vet.
sound like next step would implement check see well three vet criteria cmd/vet/readme.
anyon want that?
propos ad activ column propos project
review weekli propos review meetings.
â€” rsc propos review group
may want look variant format string: `%v:%v`, `%s:%v`, `%v:%d`.
@rsc tri make checker this.
grep `net.dial.*(sprintf|\+)` year-old go corpu attach 342 results.
dials.txt.gz
file #44955 potenti altern discuss: accept %s:%d dial instead, least tcp udp.
block #44955.
#44955 retracted. back this.
see anyon object ad vet check. objections?
base discuss above, propos seem like **like accept**.
â€” rsc propos review group
chang consensus, **accepted**. ðŸŽ‰
