cmd/go: put workspac command `go work`
propos amend workspac propos #45713, origin suggest @jayconrod (with small tweak me).
instead name command creat edit `go.work` file `go mod initwork` `go mod editwork`, name `go work init` `go work edit`. make futur subcommand (such propos `add` `sync` subcommands) clear names.
@jayconrod' comment propos name `go workspac init` `go workspac edit`.
cc @ianthehat @bcmill
anticip `go work` famili cmd releas & matur stable, `go mod` famili cmd togeth `go.mod` files, work (cached) commit revis modules; uncommit revis modul work manifest `go.work` file, togeth `go work xxx` cmds.
mayb mean app never depend modul need `go.work`, `go.mod` anymore.
@complyue, `go.mod` file provid modul path (which import-path prefix) packag within module, provid requir version depend module.
`go.work` file provid neither, it: root `go.work` file add modul graph unversioned. `go.work` tell modul workspace; `go.mod` tell packag (and need by) module.
@bcmill sorri went thoroughli spec wip, think still haskell' project manifest grammar mind suppos `go.work` go par.
`go.work` design abl pull experimental/wip branch (or tag, commit hash etc.) `go.mod` repositori scope, would propos it.
day coupl personnel requir work featur set multipl `go.mod` involved, coordin experiment branch desir case.
quit reason softwar engin practice, member make "wip releases" `go.mod` (out wip modules) rest collaborators, desir certain cases, someon depend work modules, track intermedi depend branch (i.e. without local check & manual sync 1 1). better tool whole job one shot, e.g. singl `go work pull` cmd updat cach branch date. come realli convenient.
pl forgiv lazi refresh knowledg myself, `go.mod` mode exclus on, `.go` src within `go.mod` subdir buildable?
assum "out-of-mod" packag still buildable, even rel import work there. case wrong?
mean part end app source, map 1:1 end problems, must adjust busi changes, put reus increas cost chang implement per busi process. better never get reus (imported) modules, thu also better stay `go.mod`, make intent obvious, mistak harder make.
@complyu propos chang modul mode here. propos renam command #45713.
#45713 add new workspac mode make conveni work chang affect multipl modules. modul mode still work before, still necessari commit tag releas multipl modul separately. propos solut yet.
> go.work design abl pull experimental/wip branch (or tag, commit hash etc.) go.mod repositori scope, would propos it.
proposed. feel free start new proposal, pleas keep mind would implement experi would like. command checkout modul given commit directory, add `go.work` one step, might work well; make go command check whether branch chang everi build probabl would slow.
> pl forgiv lazi refresh knowledg myself, go.mod mode exclus on, .go src within go.mod subdir buildable?
> assum "out-of-mod" packag still buildable, even rel import work there. case wrong?
almost cases, packag must insid modul buildable. possibl build small program .go file list command line, cannot import anyth outsid standard library. rel import also allow modul mode.
base discuss above, propos seem like **like accept**.
â€” rsc propos review group
chang consensus, **accepted**. ðŸŽ‰
