text/template/parse: add commentnod pars tree
currently, templat comment ignor lexer show pars tree.
make difficult build tool around templat (like code formatter) without re-impl parser.
propos add commentnod pars tree skip executer.
assum accept rejected.
> assum accept #25357 rejected.
why? go2 proposal, `text/template/parse` public packag that' use outside.
yes; plan eventu hide/remov `template/parse` package, consid api chang make lot sense. least, two propos related.
/cc @robpik thought support template-manipul program la gofmt ad commentnode.
think itâ€™ need gopl well - #36911
would made packag intern option time, couldn't, use softwar abl to, make harder maintain de facto subject compat rules. position, tale woe. hyrum' law, problem hyrum even born, bite again.
hand, peopl depend use mostli reasonable, probabl accept close #25357. think though keep comment discourag use, give us leverag unreason request change.
base discuss above, then, sound like **like accept**.
worth, might made regexp/syntax intern packag too, prove use mani context glad expos it.
sound good me. reject then? past year made clear go2 increment process instead one big set break changes, seem unlik hide entir packag point.
thank feedback. would happi add accepted.
> reject #25357, then?
imho, `template` packag provid api tool like gopl interact it. like `go` packag go.
otherwise, what' alternative, reimplement externally? currently, expect replac gopl add support (#36911).
chang consensus, accepted. yes, think reject #25357 well.
better worse, packag equival go/ast templates.
differ timelin might made internal-onli packag
prepar api specif meant public consumption, that'
happened.
accepted, take there' interest mark text/template/pars deprecated?
> accepted, take
sinc alreadi work chang fork plan push upcom days, prefer take it. thank
chang mention issue: `text/template: add commentnod templat pars tree`
current cl ad new `parsewithoptions` function; see #38627.
hey, cl229398 current block review. there' anoth discuss #38627 make api gener chang future.
chanc get help review? realli want see ship 1.15.
chang mention issue: `text/template/parse: add mode skip func-check parsing`
chang mention issue: `text/template/parse: add mode skip func-check parsing`
chang mention issue: `text/template/parse: renam deferfunccheck skipfunccheck`
chang mention issue: `doc/go1.17: document text/template.deferfunccheck`
