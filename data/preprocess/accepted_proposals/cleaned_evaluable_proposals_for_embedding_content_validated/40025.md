proposal: io/ioutil: move discard, nopcloser, readal io
io/ioutil exist mainli avoid import cycles: make use packag depend io.
practic effect io/ioutil mainli conveni os file access: readdir, readfile, tempdir, tempfile, writefile. os low level, io cannot import os. (for `io` depend `os`, see “codebas refactor (with help go)”, especi section 3.)
three function quit fit bill discard, nopcloser, readall. general, use i/o helper without dependencies, least conceptually. need io/ioutil.
confus nearli reader writer adapters—lik limitreader, multireader, multiwriter, teereader, sectionreader—ar io, nopclos discard hide io/ioutil. join others. think mostli accident end io/ioutil.
similarli confus reader writer helpers—copy, copybuffer, copyn, readatleast, readfull, writestring—ar io, readal alon hide io/ioutil. join others.
case readall, clearer reason releg io/ioutil: import byte access bytes.buffer, byte import io. readal need use bytes.buffer, especi `append` built in.
obvious cannot delet three io/ioutil. move implement io leav wrapper behind. easier new users, let packag gener i/o without depend os.
**edit**: clear, _no exist code break_. old symbol remain behind, wrapper one io.
move remain function new package, `io/fileio`, could deprec io/ioutil entirely.
happen part stdlib v2? backward compatible, cost fair amount duplication.
fileio suggest #19660 worth.
worth, think correct three symbol without wait comprehens stdlib v2.
clearli belong io, almost criteria. (and like start chop io anyth like that.)
remain symbol think deal anoth time. possibl belong os, instead isol side packag themselves, except there' alreadi os.tempdir.
reaction see (one comment, bunch emoji) positive. anyon object accept proposal?
object me. never rememb what' ioutil vs io.
base discuss above, seem like **like accept**.
(part reason never use io/ioutil work non-operating-system fs.fs. io/ioutil becom os-only.)
sorri naysay here, deal break backward compat move causes? go statement go.mod file go fix go fmt such? seem lot work essenc cosmet change.
generics, rethink whole standard librari anyway. prefer break chang like one made v2 standard library, upgrad dozen times.
assumpt would move base symbol `io`, type alia `io/ioutil`. deprec alias excessive.
```go
package io
var Discard io.Writer = devNull(0) // maybe we could make this a const?
func NopCloser(r io.Reader) io.ReadCloser  { /*...*/ }
func ReadAll(r io.Reader) ([]byte, error) { /*...*/ }
```
```go
package ioutil
var Discard io.Writer = io.Discard
func NopCloser(r io.Reader) io.ReadCloser  { return io.NopCloser(r) }
func ReadAll(r io.Reader) ([]byte, error) { return io.ReadAll(r) }
--- Comment #9 by magical ---
From the proposal:
> Obviously we cannot delete these three from io/ioutil. But we can move the implementations to io and leave wrappers behind. 
--- Comment #10 by rsc ---
I've clarified in the text above that nothing will break.
Other than that comment, seems like there is no change in consensus. Accepted.
--- Comment #11 by gopherbot ---
Change https://golang.org/cl/245657 mentions this issue: `io: move Discard, NopCloser from ioutil`
--- Comment #12 by gopherbot ---
Change https://golang.org/cl/245658 mentions this issue: `io: reimplement and move ReadAll from ioutil`
--- Comment #13 by gopherbot ---
Change https://golang.org/cl/263141 mentions this issue: `io: adopt Discard, NopCloser, ReadAll from io/ioutil`
--- Comment #14 by gopherbot ---
Change https://golang.org/cl/266364 mentions this issue: `os: add ReadFile, WriteFile, CreateTemp (was TempFile), MkdirTemp (was TempDir) from io/ioutil`
--- Comment #15 by gopherbot ---
Change https://golang.org/cl/285377 mentions this issue: `doc/go1.16: mention deprecation of io/ioutil`
