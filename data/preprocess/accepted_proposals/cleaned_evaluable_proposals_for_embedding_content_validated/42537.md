strings: add cutprefix cutsuffix
inspir #40135, anoth propos addit string packag (and extension, suppose, byte package).
string function frequent wish variant `trimprefix` `trimsuffix` report whether trimming.
```
// TrimmedPrefix returns s without the provided leading prefix string
// and reports whether it found the prefix.
// If s doesn't start with prefix, TrimmedPrefix returns s, false.
// If prefix is the empty string, TrimmedPrefix returns s, true.
func TrimmedPrefix(s, prefix string) (trimmed string, ok bool)
```
lack functions, go author resort fragil code, often write prefix/suffix liter twice hard-cod length:
```
if strings.HasPrefix(s, "myprefix") {
	s = strings.TrimPrefix(s, "myprefix")
	...
}
```
```
if strings.HasPrefix(s, "myprefix") {
	s = s[len("myprefix"):]
	...
}
```
```
if strings.HasPrefix(s, "myprefix") {
	s = s[8:]
	...
}
```
```
if t := strings.TrimPrefix(s, "myprefix"); s != t {
	// had prefix
	s = t
	...
}
```
course, function like `trimmedprefix` easi write exist outsid standard library. compani function intern string helper packag see regular use. certainli pull depend tini helper function work project gener use workarounds.
---
exampl go sourc tree along could alter use `trimmedprefix`/`trimmedsuffix`:
* `src/cmd/go/internal/modload/load.go`:
  ```
  if strings.HasPrefix(suffix, "/vendor/") {
  	return strings.TrimPrefix(suffix, "/vendor/")
  }
  ```
becom
  ```
  if v, ok := strings.TrimmedPrefix(suffix, "/vendor/"); ok {
  	return v
  }
  ```
* `src/cmd/go/proxy_test.go`:
  ```
  if !strings.HasSuffix(name, ".txt") {
  	continue
  }
  name = strings.TrimSuffix(name, ".txt")
  ```
becom
  ```
  name, ok := strings.TrimmedSuffix(name, ".txt")
  if !ok {
  	continue
  }
  ```
* `src/testing/benchmark.go`:
  ```
  if strings.HasSuffix(s, "x") {
  	n, err := strconv.ParseInt(s[:len(s)-1], 10, 0)
  	...
  }
  ```
becom
  ```
  if s, ok := strings.TrimmedSuffix(s, "x"); ok {
  	n, err := strconv.ParseInt(s, 10, 0)
  	...
  }
  ```
* `src/testing/fstest/mapfs.go`:
  ```
  if strings.HasPrefix(fname, prefix) {
  	felem := fname[len(prefix):]
  	...
  }
  ```
becom
  ```
  if felem, ok := strings.TrimmedPrefix(fname, prefix); ok {
  	...
  }
  ```
* `src/mime/mediatype.go`:
  ```
  if !strings.HasPrefix(rest, ";") {
  	return "", "", v
  }
  rest = rest[1:] // consume semicolon
  ```
becom
  ```
  rest, ok := strings.TrimmedPrefix(rest, ";")
  if !ok {
  	return "", "", v
  }
  ```
* `test/run.go`:
  ```
  if strings.HasPrefix(line, "//") {
  	line = line[2:]
  } else {
  	continue
  }
  ```
becom
  ```
  line, ok := strings.TrimmedPrefix(line, "//")
  if !ok {
  	continue
  }
  ```
* `test/run.go`:
  ```
  if strings.HasPrefix(m, "LINE+") {
  	delta, _ := strconv.Atoi(m[5:])
  	n += delta
  	...
  }
  ```
becom
  ```
  if d, ok := strings.TrimmedPrefix(m, "LINE+"); ok {
  	delta, _ := strconv.Atoi(d)
  	n += delta
  	...
  }
  ```
* `src/runtime/testdata/testprog/traceback_ancestors.go`:
  ```
  if strings.HasPrefix(tb[pos:], "goroutine ") {
  	id := tb[pos+len("goroutine "):]
  	...
  }
  ```
becom
  ```
  if id, ok := strings.TrimmedPrefix(tb[pos:], "goroutine "); ok {
  	...
  }
  ```
---
**updat 2022-03-26:** chang propos name `trimmedprefix`/`trimmedsuffix` (per @ianlancetaylor' suggestion).
`trimmedprefix` `trimmedsuffix` ?
find `if := strings.trimprefix(s, "myprefix"); != {` reasonable, might gotten use pattern. one argument favor descriptive/intuit enough complet win altern like `hasprefix`+`trimprefix`.
`cutprefix` `cutsuffix` group propos `cut` docs?
unclear whether need these, least need better names.
ad minut hope someon come better names.
(with respect) feel propos lack use case new function required. know current implement `strings.trimprefix` `strings.trimsuffix` follow
```
func TrimPrefix(s, prefix string) string {
	if HasPrefix(s, prefix) {
		return s[len(prefix):]
	}
	return s
}
```
can't one alway use `trimprefix` sampl issue' description, drop has-checks? i.e.
```diff
- if strings.HasPrefix(suffix, "/vendor/") {
- 	return strings.TrimPrefix(suffix, "/vendor/")
- }
+ return strings.TrimPrefix(suffix, "/vendor/")
```
@narqo no. place use `trimsuffix2` someth *different* test string contain prefix/suffix.
example, suggest
> ```diff
> - strings.hasprefix(suffix, "/vendor/") {
> - return strings.trimprefix(suffix, "/vendor/")
> - }
> + return strings.trimprefix(suffix, "/vendor/")
> ```
thing, version return `suffix` start `"/vendor/"` origin not.
list filenam exampl come from. go check exampl context see look like this:
```
if strings.HasPrefix(suffix, "/vendor/") {
	return strings.TrimPrefix(suffix, "/vendor/")
}
return targetPrefix + suffix
```
put hold cut.
adopt @ianlancetaylor' suggest names.
interven time sinc file proposal, thought better name. use function constantly, end copy-past mani projects.
@rsc cut proposed, accepted, implemented. un-hold propos now?
move proposal-hold.
add enough valu use `cut`?
@ianlancetaylor sure see `cut` chang thing here.
me, use `cut` purpos seem pretti awkward. take one exampl (from `src/cmd/go/proxy_test.go`):
```
if !strings.HasSuffix(name, ".txt") {
	continue
}
name = strings.TrimSuffix(name, ".txt")
```
`trimmedsuffix`, is:
```
name, ok := strings.TrimmedSuffix(name, ".txt")
if !ok {
	continue
}
```
use `cut`, guess would
```
name, extra, ok := strings.Cut(name, ".txt")
if !ok || extra != "" {
	continue
}
```
mind? me, much less clear (sinc say "suffix").
write use string function exist today, use `cut`. probabl someth like this:
```
trimmed := strings.TrimSuffix(name, ".txt")
if trimmed == name {
	continue
}
name = trimmed
```
least say "suffix" avoid write suffix string (".txt") twice, requir extra line separ string variabl comparison `trimmedsuffix` version.
cut chang thing seem remark minor. hasprefix work well use case.
propos ad activ column propos project
review weekli propos review meetings.
â€” rsc propos review group
seem like provid enough valu add standard library. anyon want make case accepting?
reason belong standard librari two parts.
**these function improv variou poor pattern peopl write absence.**
without `trimmed(prefix|suffix)`, peopl write code less clear, longer, repetitive, prone error changed. propos top give mani concret exampl rehash here. seem obviou write string constant multipl times, hardcod length, great. hasprefix *not* alway "work well use case."
**these function improv larg number sites.**
address frequenc use origin propos took quick skim now. use go sourc tree (and grep, number littl rough):
| call | count |
|--------------------------------|-------|
| `strings` function call | 4843 |
| `strings.has(prefix\|suffix)` | 1029 |
| `strings.trim(prefix\|suffix)` | 192 |
`(has|trim)(prefix|suffix)` make quarter `strings` function calls. (i check larg privat code base fairli similar; 22%.)
examin random sampl 50 `strings.has(prefix|suffix)` call 50 `strings.trim(prefix|suffix)` calls.
`strings.has(prefix|suffix)`:
* 4/50 use `strings.trim(prefix|suffix)` well
* 10/50 use separ trim code
* total 14/50 = 28% site improv `trimmed(prefix|suffix)`.
`strings.trim(prefix|suffix)`:
* 12/50 use `strings.has(prefix|suffix)` well
* 3/50 use separ check code
* total 15/50 = 30% site improv `trimmed(prefix|suffix)`.
extrapol samples, estim 288/1029 call `has(prefix|suffix)` 58/192 call `trim(prefix|suffix)` improv `trimmed(prefix|suffix)`. total littl 7% use `strings`.
way comparison, repo contain 115 use `strings.cut` (thi rewrot index/indexbyte/indexrune/split/splitn call use cut much possible).
statist make good case. thank take time gather them.
strings.trimmedprefix bit long name. given strings.cut return 'found' boolean already, want add here, mayb strings.cutprefix strings.cutsuffix?
retitled, move like accept.
base discuss above, propos seem like **like accept**.
â€” rsc propos review group
chang consensus, **accepted**. ðŸŽ‰
