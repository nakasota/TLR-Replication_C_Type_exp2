go/ast, go/token: addit support type paramet
propos formal introduc chang weâ€™v made support parameter function type `go/ast` `go/token` packages. see full write-up here:

separ issu `go/types`, type paramet add much larger api surface.
weâ€™v gotten experi new api last month use `go/types`. addit ~`multiindexexpr`~`indexlistexpr` node type signific change, felt cleanest altern considered.
feedback appreciated.
cc @griesem
**changelog:**
- `tparams` field renam `typeparams`
- `multiindexexpr` renam `indexlistexpr`
thank proposal.
typo: "invalid invalid" -> "valid invalid"?
think gener represent option arguments/paramet ok.
perhap better name found multiindexexpr: bracketedexpr? (i think type paramet instanti "indices")
but, quit understand supposit complet set node type concern stdlib concern token: dev.typeparam commit 7c5d7a4c introduc token.tilde. concern hold there? think one way handl issu documentation: could state go/* stdlib libraries, export set constant type extend facilit languag changes: assum switch handl (possibl future) cases.
could post link issu type propos ready?
@scott-cotton thank feedback.
> typo: "invalid invalid" -> "valid invalid"?
fixed, thanks.
> perhap better name found multiindexexpr: bracketedexpr? (i think type paramet instanti "indices")
think advantag multiindexexpr similar indexexpr. could start would node, sinc can't import keep associated.
> but, quit understand supposit complet set node type concern stdlib concern token
right extend concern tilde. concern node complet alreadi awar place x/tool codebas would panic encount unknown node.
one addit argument ad new node panic exist sure type switch cover syntax. context, would actual unhelp hide chang pack new syntax exist nodes. perhap that' overli optimistic.
> could post link issu type propos ready?
yes, do.
@scott-cotton go/typ propos file #47916.
what' rational ad `tparams` `functype` instead `funcdecl`? see allow interfac method type paramet (in case ever decid support those). reasons?
@mdempski rationale. put `tparams` `funcdecl` type paramet allow interfac methods, like end `tparams` `funcdecl` `functype` (or `field`?!). way hope keep thing clean, cost bit memori now.
obviou choic though.
propos ad activ column propos project
review weekli propos review meetings.
â€” rsc propos review group
slightli surpris choic tparam name. typeparam slightli longer, much clearer. also might mistak tparam param vice versa quickli read review code.
> sever altern consid repres (multiindexexpr) syntax.
agre decis go `multiindexexpr`. one major disadvantag overload exist type ad field exist tool might silent break confus ways, use inspect modifi node type repres new features. `multiindexexpr` new node, make transit much clearer.
> code wild assum complet node sets, i.e. panick unknown node encountered.
continu point above: write type switch general, includ use `go/ast` types. think good, even face new node types. tool mine need updat support type parameters, tool start panick new syntax used, abundantli clear (and probabl rather easy) add extra switch case.
addit made exist type, strong clear signal via default case panic would there, might notic tool actual need chang support new chang node struct field exist types.
@mvdan
> slightli surpris choic tparam name. typeparam slightli longer, much clearer.
thank feedback. feel way, stare while. tparam (and targs), grown accustom see 't' modifier. said, alreadi typeparam type go/types, right typeparam significantli verbose. consid chang name convention, cours decid switch appli chang go/typ well.
> agre decis go multiindexexpr.
yes, concern first come around ad new node clear best option. someth like #47783 think larg burden tool author updat code avoid panic, especi sinc mani tool want explicit support type paramet anyway.
might nice multiindexexpr next indexexpr docs. mayb indexlistexpr?
seem bit odd type param ast.functyp ast.funcdecl.
receiver, example, ast.funcdecl.
@griesem discussed, current thinking:
- suggest @mvdan here, @rsc regard #47916, clearer spell `type` rather use `t` modifier. go ahead chang `tparam` `typeparam` `targ` `typearg` throughout proposals.
- `indexlistexpr` sound good. mildli prefer `multiindexexpr` reads, seem worthwhil adjac `indexexpr` docs.
- leav type param `ast.functype` one distinct advantag forward compat type paramet interfac method (and function literals, though less like matters). think valid critiqu say design api around futur languag featur may never materialize, also think _that_ odd type paramet associ func type. inclin keep as-is, reconsid strong objections.
chang mention issue: `go/ast: renam tparam field typeparams`
base discuss above, propos seem like **like accept**.
â€” rsc propos review group
chang mention issue: `go/ast: renam multiindexexpr indexlistexpr`
chang mention issue: `47781-parameterized-go-ast.md: renam multiindexexpr indexlistexpr`
chang consensus, **accepted**. ðŸŽ‰
