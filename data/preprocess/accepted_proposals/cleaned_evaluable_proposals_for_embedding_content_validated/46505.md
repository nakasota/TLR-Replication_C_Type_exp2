spec: allow convers slice array
recent tri use new #395 featur (for convert slice array pointer: in:

review, point littl ugly, want return array, requir dereference:
```go
	return *(*[Size224]byte)(sum[:Size224])
```
would'v nicer could'v convert array instead:
```go
	return ([Size224]byte)(sum[:Size224])
```
talk @ianlancetaylor @griesemer, rememb great reason also allow part #395. mean there' subtl copy, arguabl `*` derefer also somewhat subtl copy.
could also add support convert array?
/cc @katiehockman @josharian @rogpepp @mdempski
note `[:size224]` unnecessary. there, save charact 2 `*` worri about!
think decis omit direct-to-array cast keep featur chang minimal. need cast-to-point regardless support alias back store, cast-to-array easili implement use cast-to-pointer.
like
immedi see anyth wrong allow slice array conversions, feel like save two asterisk alreadi rather nich featur justifi extra complex compil tooling.
sinc convers would copi anyway, would also add convers `string` `[n]byte` consistency?
propos ad activ column propos project
review weekli propos review meetings.
â€” rsc propos review group
fwiw propos origin could easili implemented, even prior #395, use `copy`, albeit quit concisely.
entir convinc worth tbh, especi given possibl express panic.
question: possibl make chang `copy()` equal perform `*(*array)(slice)` conversion? need support addit convers all, common practic use `copy` situations.
fwiw lot less concern extra charact line readability. pretti confus reader see convers form `*(*array)(slice)`. read "cast slice pointer array, derefer array", felt like hack best practice. mayb need get use it.
> question: possibl make chang copy() equal perform *(*array)(slice) conversion? need support addit convers all, common practic use copi situations.
probably. think there' fundament reason perform differently. file issu exampl code think perform equivalently, look go 1.18?
> pretti confus reader see convers form *(*array)(slice). read "cast slice pointer array, derefer array"
assum meant "derefer [pointer to] array", descript pretti much think it, though arguabl (checked) "assertion" (a type assertions), convers gener can't fail. slice pointer + dynam length (and capacity). convers chang pointer + static length, runtim check ensur length compatible.
> file issu exampl code think perform equivalently, look go 1.18?
brad wrote littl benchmark demonstr perform differ probabl different: got follow results:
```
BenchmarkNamed-8        201051339                6.263 ns/op
BenchmarkCopy-8         172203873                6.071 ns/op
BenchmarkPointer-8      1000000000               1.031 ns/op
```
also check sum function good exampl code perform ~equivalently.
@katiehockman thanks, file #46529.
note issue, first two function differ semant last function `len(b) < size256`. suspect matter use case, compil would need way discern can't happen optim identically.
istm need derefer nice visual signal author `*(*[n]t)(s[:n])` costli `(*[n]t)(s[:n])`. reason common user surpris array express result copi array (for exampl rang array value).
> istm need derefer nice visual signal author
person unlik notic signal among line-nois rest expression.
also note `([]byte)(s)` string `s`, `string(b)` slice `b`, visual signal â€” destin type sens â€œgood enoughâ€.
> reason common user surpris array express result copi
sure, ship alreadi sail one. ðŸ˜… given _alreadi have_ array values, seem particularli _more_ confus allow convers them.
> person unlik notic signal among line-nois rest expression.
look again, sure slice part express need all.
@bradfitz, could written
```go
	return *(*[Size224]byte)(sum)
```
?
direct-convers altern becom
```go
	return ([Size224]byte)(sum)
```
read lot cleaner me. (without redund slice expression, redund `*` token larger fraction noise.)
>given alreadi array values, seem particularli confus allow convers them.
matter confus case, signal work done; pointer convers essenti free. wrt signal `string`/`[]byte`, differ clearli distinct types, situat potenti singl charact make difference. behaviour proposal.
strictli speak unnecessary. alway write
*(*[10]int)(x)
instead propos
[10]int(x)
said, copi data slice fixed-s array pretti common use fixed-s array (like checksum etc), realli see harm make less star-full.
/cc @robpik
object ad this?
lean against. think ad new convers case worth save two `*`s.
also lean against.
string fix x/tool updat code slice-to-array-point conversions. none cl involved, case forgot updat it. think featur go frequent use justifi forc tool author support forms.
anyon want make argument favor?
> anyon want make argument favor?
believ propos would result improv discover around kind type conversion, first start write go (~8 year ago) recal one point wonder convert slice array like this. seem like obviou way it.
```go
[10]int(x)
```
time (even #395 existed), would never occur could someth like this:
```go
*(*[10]int)(x)
```
previous use languag without pointer familiar semant around dereferenc slice relat them.
kind small thing beginn even bother look compil throw error simpli write anoth way find month year later see somewher and/or learn pointer semant realis possible.
ie. somebodi start learn pointer semant go infer `*(*[10]int)(x)` possibl alreadi familiar `[10]int(x)` propos declin beginn go lock benefit #395 learn languag (and hinder come languag without pointers).
instead frame propos around "save two asterisks", would argu help discover around #395 obviou way convert slice array.
> instead frame propos around "save two asterisks", would argu help discover around #395 obviou way convert slice array.
think excel point. however, someon teach go, would prefer array gener un-discover beginn possible. almost everi case, especi new users, stick slice correct choice.
@zephyrtronium, given array exist easi discov anyway, would expect introduct go cover (veri briefly) advis new go user stick slice instead.
alreadi know whether array right tool job, go write appropri code either way.
decid prematur use array, probabl like end tangl pointer convers copi web arriv correct solut â€œstick slicesâ€. mayb better confin user' confus â€œarray slice?â€ _also_ throw pointer mix..?
found @splizard' point pretti compelling. remov gratuit star go syntax past, seem like anoth case could. array exist, want [10]byte 10-long []byte, [10]byte(x) obviou thing try.
still lean unneeded, feel strongli it. respond @splizard 's points:
> ie. somebodi start learn pointer semant go infer `*(*[10]int)(x)` possibl alreadi familiar `[10]int(x)`
case go `t(x)` `*(*t)(x)` validâ€ , much less mean thing. see reason user would infer latter possibl former. anything, would seem lead *incorrectly* infer convers valid equival misunderstand pointer work.
â€  edit: `x` `unsafe.pointer`, convert either `uintptr` `*uintptr`, `uintptr(x)` `*(*uintptr)(x)` mean differ things.
> propos declin beginn go lock benefit #395 learn languag (and hinder come languag without pointers).
see array optimization, one whose profici use depend understand pointer semant already. think beginn go programm better serv stick slices. ad slice-to-array convers help user yet familiar pointer seem like trap encourag (mis)us array more.
convinc extra burden go tool author justified. burden small, benefit seem larger.
> beginn even bother look compil throw error simpli write anoth way find month year later see somewher and/or learn pointer semant realis possibl
_as_ said newer programmer, say recent attempt `[10]int(x)`, find possible. surpris bit time given match format. chose move re-writ good chunk code use slice instead. look good, worked, shrug move on.
favor suggest change.
> chose move re-writ good chunk code use slice instead. look good, worked, shrug move on.
elabor "it look good"? say though object true, that' inher subject statement; subject exampl self-proclaim newer programm (i.e., you). seem plausibl experienc go programm would think slice form look good better.
contest new programm might tri expect slice-to-array convers work. convinc allow convers would lead new programm write idiomat go code.
decod bc1/dxt1, part requir gener 4 color use pallet decod block pixels. expect `[4]color.color` gener function felt right explicit there.
due know current trick (or reason expect exist begin with), convert gener function refactor. refactor could move gener function work array intern (so perfect example), switch use slice everywhere. chose latter "just use slices".
loss explicit size color made code messier. minor thing, minor thing add up. similarly, excess star & inconsist convers minor, add up.
stand surpris convert slice array via propos form, added.
base discuss above, propos seem like **like accept**.
â€” rsc propos review group
notic use case
@deefdragon thanks. elabor though need convert `[]color.color` `[4]color.color`? slice type either `[][4]color.color` `[4]color.color`? code avail view somewhere?
@ianlancetaylor use go 1.17, code could alreadi written `return *(*hash)(x), nil`. still seem like minor win user could write `return hash(x), nil` save 4 charact instead.
