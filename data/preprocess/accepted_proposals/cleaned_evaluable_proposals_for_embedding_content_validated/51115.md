io: add `err` field `limitedreader`
new propos
=========
per @ianlancetaylor' suggestion, propos add `err` field `io.limitedreader`. `nil`, field' valu return tri read past limit impos reader instead default `io.eof`.
origin propos
===========
variou reasons, need use `maxbytesreader()` situat `responsewriter` easili available, look code see safe pass `nil` found check type assert call unexport method it:
```go
type requestTooLarger interface {
	requestTooLarge()
}
if res, ok := l.w.(requestTooLarger); ok {
	res.requestTooLarge()
}
```
true safe pass `nil` `responsewriter`, feel quit odd reli undocument behavior kind.
### propos
sever way clean situat come mind:
1) add altern `http` packag need `responsewriter`. works, could actual return implementation, function obviou usage.
2) document implement use `responsewriter` explicitli state `nil` `responsewriter` valid.
3) add reimplement `maxbytesreader()` `io` use `responsewriter` tie `http` behavior, includ differences. could actual done, part, ad `err error` field `io.limitedreader` that, non-nil, error return limit reach instead `io.eof`.
whichev case, document `maxbytesreader()` probabl fill bit. quit odd someth call `reader` requir type primarili `io.writer` implement non-obvi reason mention anywher documentation.
fork `io.limitedreader` return custom error least three times.
propos function use `http.responsewriter`, can't see reason live net/http package. seem reduc
```Go
type MyLimitedReader struct {
    r   io.LimitedReader
    err error
}
func (mlr *MyLimitedReader) Read(p []byte) (int, error) {
    n, err := mlr.Read(p)
    if err == io.EOF {
        err = mlr.err
    }
    return n, er
}
```
correct?
so, perhap propos rewritten add `err` field `io.limitedreader`.
like new proposal. return io.eof make io.limitedread pretti unhelpful. think would also good document http.maxbytesread accept nil responsewriter.
> fork `io.limitedreader` return custom error least three times.
fwiw, `moreio.limitedwriter` `err` field too:
someon tag propos review?
altern defin error, creat packag export error caller check it.
```
// Throws an error if the reader is bigger than limit.
var ErrSizeExceeded = errors.New("stream size exceeded")
type MaxBytesReader struct {
	io.ReadCloser       // reader object
	N             int64 // max bytes remaining.
}
func NewMaxBytesReader(r io.ReadCloser, limit int64) *MaxBytesReader {
	return &MaxBytesReader{r, limit}
}
func (b *MaxBytesReader) Read(p []byte) (n int, err error) {
	if b.N <= 0 {
		return 0, ErrSizeExceeded
	}
	if int64(len(p)) > b.N {
		p = p[0:b.N]
	}
	n, err = b.ReadCloser.Read(p)
	b.N -= int64(n)
	return
}
```
~that would break current user io.limitreader/limitedreader.~
misunderstood proposal.
@carlmjohnson alreadi tagged. get soon, think.
chang mention issue: `io: add err field limitedreader`
seem reasonable. thank proposal.
propos ad activ column propos project
review weekli propos review meetings.
â€” rsc propos review group
anyon object ad this?
base discuss above, propos seem like **like accept**.
â€” rsc propos review group
chang consensus, **accepted**. ðŸŽ‰
