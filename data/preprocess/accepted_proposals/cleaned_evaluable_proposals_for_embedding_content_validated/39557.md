proposal: flag: add func
wrote librari extens flag package. specif fit flag easi enough write one' there' real point ad standard library, one extens think would make good addit standard library, flagext.callback.
flagext.callback essenti wrapper convert function flag.value. flag.valu two method (plu option third method flag.getter), `string() string` (and `get() interface{}`) method pure boilerpl ignor put stringer onto bare `func( string) error`.
function' signatur
```go
// Callback is a convenience function for defining a Set(string) error function
// on a flag.FlagSet without constructing a new type.
//
// If nil, fl defaults to flag.CommandLine. Value is only used for showing the
// default in usage help.
func Callback(fl *flag.FlagSet, name, value, usage string, cb func(string) error)
```
example:
```go
mode := "none"
flagext.Callback(fs, "mode", mode, "what mode to use", func(s string) error {
    if s != strings.ToLower(s) {
        return fmt.Errorf("mode must be lower case")
    }
    mode = s
    return nil
})
```
think this, like http.handlerfunc, conveni would good standard library. standard library, could method flagset instead function take flagset, ad standard librari would advantag reproduc import extern package.
propos addit
```go
func (f *FlagSet) Callback(name, value, usage string, cb func(string) error)
```
correspond top level packag function.
compil badly-nam function:
```
func Flagfn1(name, usage string, f func(string)) {
	flag.Var(fn1(f), name, usage)
}
type fn1 func(string)
func (f fn1) Set(s string) error {
	f(s)
	return nil
}
func (f fn1) String() string { return "" }
```
better name would flag.func probably.
one downsid return empti string string mean flag.printdefault never print default setting. mayb that' ok.
unclear valu argument necessari case. mayb api (at top level, flagset) would be:
func func(name, usag string, f func(string))
thoughts?
/cc @robpik
flagext package, set default usag valu explain doc anyth besid chang help text. might simpler drop let user write `(default ...)` hand usag string.
think `func(string) error`, `func(string)`. return error let complain valu malform unusable.
sorri rapid fire responses.
signatur `func func(name, usag string, f func(string) error)` want use `func(string)`, easi add inlin wrapper return nil, vice-versa, clear error `func(string) error` need `func(string)`.
yes, return error func make lot sense.
(in compil bet func call fatal, that' right general.)
ok, sound like api is:
func func(name, usag string, f func(string) error)
thoughts?
seem good me. :-) exampl doc would wryli funny?
chang mention issue: `flag: add func`
there' cl propos still open. read issu cl code sever time understand want it. bad idea, badli explained.
yes, code part cl trivial, sent period today. hard part write good docstring.
ignor cl, sound like peopl gener favor api discuss above.
base discussion, then, seem like **like accept**.
work doc separately. chang consensus, accepted.
go 1.15 out, cl review need someth els first?
stuck go 1.16, alreadi use type `func` packag `github.com/dolmen-go/flagx` `flag.var`.
