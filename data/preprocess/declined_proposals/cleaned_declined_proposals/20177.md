==== [Issue Title] ====
proposal: cmd/go: support build customization with a build.go file

==== [Issue Body] ====
Having used Rust and Cargo for a bit before coming back to Go for a new project, one thing I really miss is scripted builds. Cargo supports a `build.rs` file that is compiled and then run to do things like locate native dependencies and generate source files. The output of the build "script" specifies library search paths, compiler options, features (build tags), etc. It would be really great if something similar could be accomplished with Go projects fetched with `go get` and/or `dep`. I haven't really thought about the overall design or impact of such a feature, but Cargo's would be a good model to consider.

==== [Comments] ====

--- Comment #1 by mvdan ---
Similar ideas have been suggested before. I was not successful at finding the ones I remember seeing, but https://github.com/golang/go/issues/19849 is a recent example.

The general idea is that `go get` should not run arbitrary code. See Brad's reply in the thread above.

I also don't think this proposal is detailed enough. What exactly would you do in such a `build.go` file that you can't currently do with regular Go files and `go generate`?

Also note that some projects already use custom build systems like `make`. You only have to stick to `go get` (or `install`, etc) if you want your package to be easily and quickly installable.

I don't think I have the authority to decline proposals, so I'll let someone else decide. But I'm fairly sure this was ruled out in the Go design on purpose.

--- Comment #2 by ghost ---
it is related with https://github.com/golang/dep/issues/269
and it reflects https://github.com/golang/dep/issues/269#issuecomment-283106220

--- Comment #3 by rsc ---
Blocked on dependency management.


--- Comment #4 by bcmills ---
> Blocked on dependency management.

Dependency management is essentially done at this point, so removing `Proposal-Hold`.

--- Comment #5 by seankhliao ---
This also goes against Go's work in supply chain security: https://go.dev/blog/supply-chain
> Building code doesn’t execute it
> It is an explicit security design goal of the Go toolchain that neither fetching nor building code will let that code execute, even if it is untrusted and malicious.

--- Comment #6 by rsc ---
As noted by @seankhliao this runs directly against the design of Go's dependency management.


--- Comment #7 by rsc ---

This proposal has been added to the [active column](https://golang.org/s/proposal-status#active) of the proposals project
and will now be reviewed at the weekly proposal review meetings.
— rsc for the proposal review group


--- Comment #8 by rsc ---

Based on the discussion above, this proposal seems like a **[likely decline](https://golang.org/s/proposal-status#likely-decline)**.
— rsc for the proposal review group


--- Comment #9 by rsc ---

No change in consensus, so **[declined](https://golang.org/s/proposal-status#declined)**.
— rsc for the proposal review group

