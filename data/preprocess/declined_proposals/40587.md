=== Fetching Proposal: Poor feasibility ===
Issue URL: https://github.com/golang/go/issues/40587

==== [Issue Title] ====
proposal: net/http: add scheme constants

==== [Issue Body] ====
<p>Over the years I've noticed quite a lot of “magic” strings
in HTTP-related code, primarily <code>"http"</code> and
<code>"https"</code>.  There are a lot of examples
in <code>net/http/...</code> as well as in <code>cmd/...</code>.</p>

<p>So, I propose to add these constants to <code>net/http</code>
(or, perhaps, <code>net/url</code>?):</p>

<pre><code>const (
&#x09;Scheme = "http"
&#x09;Secure = "https"
)</code></pre>

<p>Example usage:</p>

<pre><code>var u = &amp;url.URL{
&#x09;Scheme: http.Scheme,
&#x09;Host:   host,
&#x09;Path:   path.Join("users", userID),
}</code></pre>

<pre><code>if u.Scheme != http.Secure {
&#x09;return errors.New("insecure api")
}</code></pre>


==== [Comments] ====

--- Comment #1 by seankhliao ---
I think `Scheme` and `Secure` are not obvious to the reader, if anything I would prefer plain `HTTP` and `HTTPS` though it stutters

--- Comment #2 by ainar-g ---
<p>@seankhliao  My reasoning was similar to&#xA0;that
of&#xA0;<code>sort.Interface</code>.&#x2003;Then&#xA0;again, we
do&#xA0;have <code>log.Log</code>, so&#xA0;I&#xA0;don't really have
a&#xA0;strong opinion about&#xA0;the&#xA0;exact&#xA0;naming.</p>


--- Comment #3 by davecheney ---
I don’t think these constants add anything for the reader. The literals `http` and `https` are descriptive, we’ll know, and unlikely to change at this point. A constant which represented these literals would be identical, except would be capitalised, which is misleading as HTTP schemes are not capitalised. 

--- Comment #4 by ainar-g ---
<p>@davecheney  My main concern here are possible
misspellings.&#x2003;I've already seen <code>http</code> being
misspelled as&#xA0;<code>htp</code> in&#xA0;a&#xA0;private
project.&#x2003;Luckily, the&#xA0;tests caught it, but&#xA0;still.</p>


--- Comment #5 by bradfitz ---
In addition to the stutter, writing `http.HTTP` and `http.HTTPS` is 3 characters longer than `"http"` and `"https"`.

People felt strongly about adding the HTTP method constants too but in practice they're not used because `"GET"` looks better than `http.MethodGet`. I feel like this would be the same.

As such, I'm not in favor of this.


--- Comment #6 by ainar-g ---
<p>@bradfitz</p>

<blockquote>
<p>[…] in practice they're not used because <code>"GET"</code> looks
better than <code>http.MethodGet</code>. I feel like this would be the
same.</p>
</blockquote>

<p>That&#xA0;is not&#xA0;my experience, to&#xA0;be honest.&#x2003;Unless
the&#xA0;code base is older than&#xA0;the&#xA0;named constants,
I&#xA0;have almost always seen the&#xA0;constants preferred
to&#xA0;literals.</p>

<p>As&#xA0;for&#xA0;the&#xA0;stuttering, my original proposal doesn't
have that&#xA0;issue.</p>


--- Comment #7 by davecheney ---
> As for the stuttering, my original proposal doesn't have that issue

Accepted, but the names http.Scheme and http.Secure don’t describe their contents; the former sounds like the name of a type and the latter sounds like some kind of boolean 

--- Comment #8 by ainar-g ---
<p>@davecheney&#x2003;I&#xA0;guess they could be
<code>http.SchemePlain</code> and &#xA0;<code>http.SchemeSecure</code>,
just like&#xA0;we now have <code>http.MethodGet</code>
and&#xA0;<code>http.MethodPost</code>.&#x2003;But&#xA0;that's way
more&#xA0;typing.</p> 

<p>I&#xA0;would hope that&#xA0;packages that&#xA0;implement other
protocols would add their schemes in&#xA0;a&#xA0;similar fashion,
so&#xA0;that we could have, say, <code>ftp.Scheme</code>
and&#xA0;<code>git.Scheme</code>.</p> 


--- Comment #9 by rsc ---
Based on the discussion, this seems like a **likely decline**.


--- Comment #10 by rsc ---
No change in consensus, so declined.

